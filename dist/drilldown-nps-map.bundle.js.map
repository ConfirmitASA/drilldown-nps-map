{"version":3,"sources":["webpack:///drilldown-nps-map.bundle.js","webpack:///webpack/bootstrap a0d666dcd86636f70b0b","webpack:///./src/main.js","webpack:///./src/DrilldownMap.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_DrilldownMap","_DrilldownMap2","window","Reportal","mixin","DrilldownMap","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","constructor","prototype","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","_ref","arguments","undefined","hierarchy","containerID","dataClasses","options","this","Highcharts","Error","maps","addMapIDsToHierarchyLevel","drawMap","sourceMap","countriesList","mapName","geojson","title","version","type","copyright","copyrightShort","copyrightUrl","crs","properties","name","hc-transform","scale","jsonres","jsonmarginX","jsonmarginY","xoffset","yoffset","features","countriesID","world","forEach","feature","push","Array","console","log","parent","el","subcells","mapID","concat","drilldown","text","code","data","map","series","createSingleSeries","s","tooltip","pointFormat","mapData","createCustomGeoJSON","joinBy","getSeriesData","source","curLVL","mapChart","lang","drillUpText","legend","enabled","mapNavigation","chart","events","e","filter","point","addSingleSeriesAsDrilldown","composeSeries","applyDrilldown","addSeriesAsDrilldown","drillupall"],"mappings":"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","file":"drilldown-nps-map.bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _DrilldownMap = __webpack_require__(1);\n\t\n\tvar _DrilldownMap2 = _interopRequireDefault(_DrilldownMap);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\twindow.Reportal = window.Reportal || {};\n\t_DrilldownMap2.default.mixin(window.Reportal, {\n\t  DrilldownMap: _DrilldownMap2.default\n\t});\n\texports.default = Reportal;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar DrilldownMap = function () {\n\t  function DrilldownMap() {\n\t    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t        hierarchy = _ref.hierarchy,\n\t        containerID = _ref.containerID,\n\t        _ref$dataClasses = _ref.dataClasses,\n\t        dataClasses = _ref$dataClasses === undefined ? [{\n\t      from: 80,\n\t      to: 100,\n\t      color: '#8bc34a',\n\t      name: 'Promoter'\n\t    }, {\n\t      from: 60,\n\t      to: 80,\n\t      color: '#ffc107',\n\t      name: 'Passive'\n\t    }, {\n\t      from: 0,\n\t      to: 60,\n\t      color: '#f44336',\n\t      name: 'Detractor'\n\t    }] : _ref$dataClasses,\n\t        options = _ref.options;\n\t\n\t    _classCallCheck(this, DrilldownMap);\n\t\n\t    if ((typeof Highcharts === 'undefined' ? 'undefined' : _typeof(Highcharts)) == undefined) {\n\t      throw new Error('Highcharts must be declared. Probably they are missing');\n\t    };\n\t    if (_typeof(Highcharts.maps) == undefined) {\n\t      throw new Error('HighMaps must be loaded. Probably they are missing');\n\t    };\n\t    this.constructor.addMapIDsToHierarchyLevel(hierarchy);\n\t    this.constructor.drawMap(hierarchy, containerID);\n\t  }\n\t\n\t  _createClass(DrilldownMap, null, [{\n\t    key: 'createCustomGeoJSON',\n\t    value: function createCustomGeoJSON(sourceMap, countriesList, mapName) {\n\t      var geojson = {\n\t        title: \"\",\n\t        version: \"0.1.0\",\n\t        type: \"FeatureCollection\",\n\t        copyright: \"Copyright (c) 2015 Highsoft AS, Based on data from Natural Earth\",\n\t        copyrightShort: \"Natural Earth\",\n\t        copyrightUrl: \"http://www.naturalearthdata.com\",\n\t        crs: {\n\t          type: \"name\",\n\t          properties: {\n\t            name: \"urn:ogc:def:crs:EPSG:54003\"\n\t          }\n\t        },\n\t        \"hc-transform\": {\n\t          default: {\n\t            crs: \"+proj=mill +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +R_A +datum=WGS84 +units=m +no_defs\",\n\t            scale: 1.72182781654e-05,\n\t            jsonres: 15.5,\n\t            jsonmarginX: -999,\n\t            jsonmarginY: 9851.0,\n\t            xoffset: -19495356.3693,\n\t            yoffset: 12635908.1982\n\t          }\n\t        },\n\t        features: []\n\t      };\n\t      geojson.title = mapName;\n\t      if (typeof countriesID === 'string') {\n\t        world.features.forEach(function (feature) {\n\t          if (feature.id === countriesID) {\n\t            geojson.features.push(feature);\n\t          }\n\t        });\n\t      } else if (countriesID instanceof Array) {\n\t        countriesID.forEach(function (id) {\n\t          world.features.forEach(function (feature) {\n\t            if (feature.id === id) {\n\t              geojson.features.push(feature);\n\t            }\n\t          });\n\t        });\n\t      } else {\n\t        console.log(typeof countriesID === 'undefined' ? 'undefined' : _typeof(countriesID));\n\t        throw new Error(\"Countries list probably missing or has corrupted data\");\n\t      }\n\t      return geojson;\n\t    }\n\t  }, {\n\t    key: 'addMapIDsToHierarchyLevel',\n\t    value: function addMapIDsToHierarchyLevel(hierarchy) {\n\t      var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\t\n\t      hierarchy.forEach(function (el) {\n\t        el.parent = parent;\n\t        if (el.subcells) {\n\t          DrilldownMap.addMapIDsToHierarchyLevel(el.subcells, el);\n\t        }\n\t        if (el.parent && el.mapID) {\n\t          if (!el.parent.mapID) el.parent.mapID = [];\n\t          el.parent.mapID = el.parent.mapID.concat(el.mapID);\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'getSeriesData',\n\t    value: function getSeriesData(el) {\n\t      if (typeof el.mapID === 'string') {\n\t        return [{\n\t          'drilldown': el.text,\n\t          'code': el.mapID,\n\t          'data': el.data\n\t        }];\n\t      } else if (el.mapID instanceof Array) {\n\t        return el.mapID.map(function (id) {\n\t          return {\n\t            'drilldown': el.text,\n\t            'code': id,\n\t            'value': el.data\n\t          };\n\t        });\n\t      } else {\n\t        throw new Error(\"Data element is corrupted\");\n\t      }\n\t    }\n\t  }, {\n\t    key: 'composeSeries',\n\t    value: function composeSeries(obj) {\n\t      var series = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\t\n\t      if (obj.subcells) {\n\t        obj.subcells.forEach(function (el) {\n\t          if (el.mapID) {\n\t            series.push(createSingleSeries(el));\n\t          }\n\t        });\n\t        return series;\n\t      } else {\n\t        return createSingleSeries(obj);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'createSingleSeries',\n\t    value: function createSingleSeries(el) {\n\t      if (el.mapID) {\n\t        var s = {\n\t          name: el.text,\n\t          tooltip: {\n\t            pointFormat: 'NPS : {point.value}'\n\t          },\n\t          parent: el.parent.text,\n\t          mapData: Highcharts.geojson(createCustomGeoJSON(Highcharts.maps['custom/world'], el.mapID, el.text)),\n\t          joinBy: ['hc-a2', 'code'],\n\t          data: getSeriesData(el)\n\t        };\n\t        return s;\n\t      }\n\t    }\n\t\n\t    /**\n\t     * Copies props from a source object to a target object.\n\t     *\n\t     * Note, this method uses a simple `for...in` strategy for enumerating\n\t     * properties.  To ensure only `ownProperties` are copied from source\n\t     * to target and that accessor implementations are copied, use `extend`.\n\t     * @param {Object} target Target object to copy properties to.\n\t     * @param {Object} source Source object to copy properties from.\n\t     * @return {Object} Target object that was passed as first argument.\n\t     */\n\t\n\t  }, {\n\t    key: 'mixin',\n\t    value: function mixin(target, source) {\n\t      for (var i in source) {\n\t        target[i] = source[i];\n\t      }\n\t      return target;\n\t    }\n\t  }, {\n\t    key: 'drawMap',\n\t    value: function drawMap(hierarchy, containerID) {\n\t      var curLVL = hierarchy[0];\n\t      Highcharts.mapChart(containerID, {\n\t        lang: {\n\t          drillUpText: 'Back to {series.parent}'\n\t        },\n\t        title: {\n\t          text: 'Drilldown map'\n\t        },\n\t        legend: {\n\t          enabled: false\n\t        },\n\t        mapNavigation: {\n\t          enabled: true\n\t        },\n\t        chart: {\n\t          events: {\n\t            drilldown: function drilldown(e) {\n\t              var chart = this;\n\t              curLVL = curLVL.subcells.filter(function (el) {\n\t                return el.text == e.point.series.name;\n\t              })[0];\n\t              if (curLVL.subcells) {\n\t                curLVL.subcells.forEach(function (el) {\n\t                  chart.addSingleSeriesAsDrilldown(e.point, composeSeries(el));\n\t                });\n\t                chart.applyDrilldown();\n\t              } else {\n\t                chart.addSeriesAsDrilldown(e.point, composeSeries(curLVL));\n\t              }\n\t            },\n\t            drillupall: function drillupall(e) {\n\t              curLVL = curLVL.parent;\n\t            }\n\t          }\n\t        },\n\t        series: composeSeries(curLVL, [{\n\t          mapData: Highcharts.maps[\"custom/world\"]\n\t        }])\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return DrilldownMap;\n\t}();\n\t\n\texports.default = DrilldownMap;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// drilldown-nps-map.bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a0d666dcd86636f70b0b","\nimport DrilldownMap from \"./DrilldownMap\"\nwindow.Reportal = window.Reportal || {}\nDrilldownMap.mixin(window.Reportal,{\n  DrilldownMap\n});\nexport default Reportal\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","class DrilldownMap {\n  constructor({hierarchy, containerID, dataClasses = [{\n    from: 80,\n    to: 100,\n    color: '#8bc34a',\n    name: 'Promoter'\n  },{\n    from: 60,\n    to: 80,\n    color: '#ffc107',\n    name: 'Passive'\n  },{\n    from: 0,\n    to: 60,\n    color: '#f44336',\n    name: 'Detractor'\n  }], options}={}){\n    if(typeof Highcharts == undefined){throw new Error('Highcharts must be declared. Probably they are missing')};\n    if(typeof Highcharts.maps == undefined){throw new Error('HighMaps must be loaded. Probably they are missing')};\n    this.constructor.addMapIDsToHierarchyLevel(hierarchy);\n    this.constructor.drawMap(hierarchy, containerID);\n  }\n\n  static createCustomGeoJSON(sourceMap, countriesList, mapName) {\n    let geojson = {\n      title:\"\",\n      version:\"0.1.0\",\n      type:\"FeatureCollection\",\n      copyright:\"Copyright (c) 2015 Highsoft AS, Based on data from Natural Earth\",\n      copyrightShort:\"Natural Earth\",\n      copyrightUrl:\"http://www.naturalearthdata.com\",\n      crs:{\n        type:\"name\",\n        properties:{\n          name:\"urn:ogc:def:crs:EPSG:54003\"\n        }\n      },\n      \"hc-transform\":{\n        default:{\n          crs:\"+proj=mill +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +R_A +datum=WGS84 +units=m +no_defs\",\n          scale:1.72182781654e-05,\n          jsonres:15.5,\n          jsonmarginX:-999,\n          jsonmarginY:9851.0,\n          xoffset:-19495356.3693,\n          yoffset:12635908.1982\n        }\n      },\n      features:[]\n    };\n    geojson.title = mapName;\n    if (typeof countriesID === 'string'){\n      world.features.forEach(feature => {\n        if (feature.id === countriesID) {\n          geojson.features.push(feature);\n        }\n      })\n    } else if (countriesID instanceof Array){\n      countriesID.forEach(id => {\n        world.features.forEach(feature => {\n          if (feature.id === id) {\n            geojson.features.push(feature);\n          }\n        })\n      });\n    } else {\n      console.log(typeof countriesID);\n      throw new Error(\"Countries list probably missing or has corrupted data\");\n    }\n    return geojson;\n  }\n\n  static addMapIDsToHierarchyLevel(hierarchy, parent = null) {\n    hierarchy.forEach(el => {\n      el.parent = parent;\n      if (el.subcells) {\n        DrilldownMap.addMapIDsToHierarchyLevel(el.subcells, el);\n      }\n      if(el.parent && el.mapID){\n        if(!el.parent.mapID)\n          el.parent.mapID = [];\n        el.parent.mapID = el.parent.mapID.concat(el.mapID);\n      }\n    });\n  }\n\n  static getSeriesData(el){\n  if (typeof el.mapID === 'string') {\n    return [{\n      'drilldown': el.text,\n      'code': el.mapID,\n      'data': el.data\n    }]\n  } else if (el.mapID instanceof Array){\n    return el.mapID.map(function (id) {\n      return {\n        'drilldown': el.text,\n        'code': id,\n        'value': el.data\n      }\n    });\n  } else {\n    throw new Error(\"Data element is corrupted\");\n  }\n}\n  static composeSeries(obj, series = []){\n    if (obj.subcells){\n      obj.subcells.forEach( el => {\n        if (el.mapID) {\n          series.push(createSingleSeries(el));\n        }\n      });\n      return series;\n    } else {\n      return createSingleSeries(obj);\n    }\n  }\n\n  static createSingleSeries(el){\n    if (el.mapID) {\n      let s = {\n        name: el.text,\n        tooltip: {\n          pointFormat: 'NPS : {point.value}'\n        },\n        parent: el.parent.text,\n        mapData: Highcharts.geojson(createCustomGeoJSON(Highcharts.maps['custom/world'], el.mapID, el.text)),\n        joinBy: ['hc-a2', 'code'],\n        data: getSeriesData(el)\n      };\n      return s;\n    }\n  }\n\n  /**\n   * Copies props from a source object to a target object.\n   *\n   * Note, this method uses a simple `for...in` strategy for enumerating\n   * properties.  To ensure only `ownProperties` are copied from source\n   * to target and that accessor implementations are copied, use `extend`.\n   * @param {Object} target Target object to copy properties to.\n   * @param {Object} source Source object to copy properties from.\n   * @return {Object} Target object that was passed as first argument.\n   */\n  static mixin(target, source) {\n    for (let i in source) {\n      target[i] = source[i];\n    }\n    return target;\n  }\n\n  static drawMap(hierarchy, containerID){\n    let curLVL = hierarchy[0];\n    Highcharts.mapChart( containerID, {\n      lang: {\n        drillUpText: 'Back to {series.parent}'\n      },\n      title: {\n        text: 'Drilldown map'\n      },\n      legend: {\n        enabled: false\n      },\n      mapNavigation: {\n        enabled: true,\n      },\n      chart:{\n        events: {\n          drilldown: function(e){\n            let chart = this;\n            curLVL = curLVL.subcells.filter( el => el.text == e.point.series.name)[0];\n            if (curLVL.subcells){\n              curLVL.subcells.forEach( el => {\n                chart.addSingleSeriesAsDrilldown(e.point, composeSeries(el));\n              });\n              chart.applyDrilldown();\n            } else {\n              chart.addSeriesAsDrilldown(e.point, composeSeries(curLVL));\n            }\n          },\n          drillupall: function(e){\n            curLVL = curLVL.parent;\n          }\n        }\n      },\n      series: composeSeries(curLVL,[{\n        mapData: Highcharts.maps[\"custom/world\"]\n      }])\n    });\n  }\n}\n\nexport default DrilldownMap;\n\n\n\n// WEBPACK FOOTER //\n// ./src/DrilldownMap.js"],"sourceRoot":""}
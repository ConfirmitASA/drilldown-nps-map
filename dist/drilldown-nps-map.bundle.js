/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _DrilldownMap = __webpack_require__(2);\n\nvar _DrilldownMap2 = _interopRequireDefault(_DrilldownMap);\n\nvar _rReportalBase = __webpack_require__(1);\n\nvar _rReportalBase2 = _interopRequireDefault(_rReportalBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.Reportal = window.Reportal || {};\n_rReportalBase2.default.mixin(window.Reportal, {\n  DrilldownMap: _DrilldownMap2.default\n});\n\nexports.default = Reportal;\nmodule.exports = exports['default'];//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcz8zNDc5Il0sIm5hbWVzIjpbIndpbmRvdyIsIlJlcG9ydGFsIiwibWl4aW4iLCJEcmlsbGRvd25NYXAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBQSxPQUFPQyxRQUFQLEdBQWtCRCxPQUFPQyxRQUFQLElBQW1CLEVBQXJDO0FBQ0Esd0JBQWFDLEtBQWIsQ0FBbUJGLE9BQU9DLFFBQTFCLEVBQW1DO0FBQ2pDRTtBQURpQyxDQUFuQzs7a0JBSWVGLFEiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IERyaWxsZG93bk1hcCBmcm9tIFwiLi9EcmlsbGRvd25NYXBcIjtcbmltcG9ydCBSZXBvcnRhbEJhc2UgZnJvbSBcInItcmVwb3J0YWwtYmFzZVwiO1xuXG53aW5kb3cuUmVwb3J0YWwgPSB3aW5kb3cuUmVwb3J0YWwgfHwge31cblJlcG9ydGFsQmFzZS5taXhpbih3aW5kb3cuUmVwb3J0YWwse1xuICBEcmlsbGRvd25NYXBcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBSZXBvcnRhbFxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL21haW4uanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 1 */
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ReportalBase = function () {\n  function ReportalBase() {\n    _classCallCheck(this, ReportalBase);\n  }\n\n  _createClass(ReportalBase, null, [{\n    key: 'mixin',\n\n\n    /**\r\n     * Copies props from a source object to a target object.\r\n     *\r\n     * Note, this method uses a simple `for...in` strategy for enumerating\r\n     * properties.  To ensure only `ownProperties` are copied from source\r\n     * to target and that accessor implementations are copied, use `extend`.\r\n     *\r\n     * @method mixin\r\n     * @param {Object} target Target object to copy properties to.\r\n     * @param {Object} source Source object to copy properties from.\r\n     * @return {Object} Target object that was passed as first argument.\r\n     */\n    value: function mixin(target, source) {\n      for (var i in source) {\n        target[i] = source[i];\n      }\n      return target;\n    }\n  }, {\n    key: '_logger',\n    value: function _logger(level, args) {\n      // accept ['foo', 'bar'] and [['foo', 'bar']]\n      if (args.length === 1 && Array.isArray(args[0])) {\n        args = args[0];\n      }\n      // only accept logging functions\n      switch (level) {\n        case 'log':\n        case 'warn':\n        case 'error':\n          console[level].apply(console, args);\n          break;\n      }\n    }\n  }, {\n    key: '_log',\n    value: function _log() {\n      var args = Array.prototype.slice.call(arguments, 0);\n      this._logger('log', args);\n    }\n  }, {\n    key: '_warn',\n    value: function _warn() {\n      var args = Array.prototype.slice.call(arguments, 0);\n      this._logger('warn', args);\n    }\n  }, {\n    key: '_error',\n    value: function _error() {\n      var args = Array.prototype.slice.call(arguments, 0);\n      this._logger('error', args);\n    }\n\n    /**\r\n     * Creates a named event with `name`\r\n     * @param {String} name - name of the event\r\n     * @return {Event} Returns a created event\r\n     * */\n\n  }, {\n    key: 'newEvent',\n    value: function newEvent(name) {\n      var event = document.createEvent('Event');\n      event.initEvent(name, true, true);\n      return event;\n    }\n\n    /**\r\n     * Inspects if the current string might be converted to number and renders it as number. If string length is 0, returns `null`. If none applies returns the string as is.\r\n     * @param {String} str - value of the cell if not HTML contents\r\n     * @return {Number|null|String}\r\n     * */\n\n  }, {\n    key: 'isNumber',\n    value: function isNumber(str) {\n      if (!isNaN(parseFloat(str))) {\n        str = str.replace(/,/i, ''); // remove unnecessary comma as a delimiter for thousands from data.\n        return parseFloat(str);\n      } else if (str.length == 0) {\n        return null;\n      } else {\n        return str;\n      }\n    }\n\n    /**\r\n     * Creates an XHR wrapped in a Promise\r\n     * @param {!String} URL - url to send a `GET` request to\r\n     * @return {Promise} Returns a then-able promise with `XMLHttpRequest.responseText`\r\n     * */\n\n  }, {\n    key: 'promiseRequest',\n    value: function promiseRequest(URL) {\n      return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', URL, true);\n        xhr.onload = function () {\n          xhr.status == 200 ? resolve(xhr.responseText) : reject(Error(xhr.status + ': ' + xhr.statusText));\n        };\n        xhr.onerror = function () {\n          reject(Error(\"Network Error\"));\n        };\n        xhr.send();\n      });\n    }\n\n    /**\r\n     * Gets a variable listed in query string\r\n     * @param {!String} variable - variable name to get value for\r\n     * @param {String=} [query=window.location.search.substring(1)] - the query string to search variable for in\r\n     * @return {String} Returns value for the variable\r\n     * */\n\n  }, {\n    key: 'getQueryVariable',\n    value: function getQueryVariable(variable) {\n      var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.location.search.substring(1);\n\n      var vars = query.split(\"&\");\n      for (var i = 0; i < vars.length; i++) {\n        var pair = vars[i].split(\"=\");\n        if (pair[0].toLowerCase() == variable.toLowerCase()) {\n          return pair[1];\n        }\n      }\n      return null;\n    }\n  }]);\n\n  return ReportalBase;\n}();\n\nexports.default = ReportalBase;\nmodule.exports = exports['default'];//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L3ItcmVwb3J0YWwtYmFzZS9zcmMvcmVwb3J0YWwtYmFzZS5qcz9kYTM1Il0sIm5hbWVzIjpbIlJlcG9ydGFsQmFzZSIsInRhcmdldCIsInNvdXJjZSIsImkiLCJsZXZlbCIsImFyZ3MiLCJsZW5ndGgiLCJBcnJheSIsImlzQXJyYXkiLCJjb25zb2xlIiwiYXBwbHkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJfbG9nZ2VyIiwibmFtZSIsImV2ZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFdmVudCIsImluaXRFdmVudCIsInN0ciIsImlzTmFOIiwicGFyc2VGbG9hdCIsInJlcGxhY2UiLCJVUkwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ubG9hZCIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsIkVycm9yIiwic3RhdHVzVGV4dCIsIm9uZXJyb3IiLCJzZW5kIiwidmFyaWFibGUiLCJxdWVyeSIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwidmFycyIsInNwbGl0IiwicGFpciIsInRvTG93ZXJDYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBQU1BLFk7Ozs7Ozs7OztBQUVKOzs7Ozs7Ozs7Ozs7MEJBWWFDLE0sRUFBUUMsTSxFQUFRO0FBQzNCLFdBQUssSUFBSUMsQ0FBVCxJQUFjRCxNQUFkLEVBQXNCO0FBQ3BCRCxlQUFPRSxDQUFQLElBQVlELE9BQU9DLENBQVAsQ0FBWjtBQUNEO0FBQ0QsYUFBT0YsTUFBUDtBQUNEOzs7NEJBRWNHLEssRUFBT0MsSSxFQUFNO0FBQzFCO0FBQ0EsVUFBSUEsS0FBS0MsTUFBTCxLQUFnQixDQUFoQixJQUFxQkMsTUFBTUMsT0FBTixDQUFjSCxLQUFLLENBQUwsQ0FBZCxDQUF6QixFQUFpRDtBQUMvQ0EsZUFBT0EsS0FBSyxDQUFMLENBQVA7QUFDRDtBQUNEO0FBQ0Es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Ozs7a0JBR1kvQyxZIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBSZXBvcnRhbEJhc2Uge1xyXG5cclxuICAvKipcclxuICAgKiBDb3BpZXMgcHJvcHMgZnJvbSBhIHNvdXJjZSBvYmplY3QgdG8gYSB0YXJnZXQgb2JqZWN0LlxyXG4gICAqXHJcbiAgICogTm90ZSwgdGhpcyBtZXRob2QgdXNlcyBhIHNpbXBsZSBgZm9yLi4uaW5gIHN0cmF0ZWd5IGZvciBlbnVtZXJhdGluZ1xyXG4gICAqIHByb3BlcnRpZXMuICBUbyBlbnN1cmUgb25seSBgb3duUHJvcGVydGllc2AgYXJlIGNvcGllZCBmcm9tIHNvdXJjZVxyXG4gICAqIHRvIHRhcmdldCBhbmQgdGhhdCBhY2Nlc3NvciBpbXBsZW1lbnRhdGlvbnMgYXJlIGNvcGllZCwgdXNlIGBleHRlbmRgLlxyXG4gICAqXHJcbiAgICogQG1ldGhvZCBtaXhpblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGFyZ2V0IG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgdG8uXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBTb3VyY2Ugb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tLlxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gVGFyZ2V0IG9iamVjdCB0aGF0IHdhcyBwYXNzZWQgYXMgZmlyc3QgYXJndW1lbnQuXHJcbiAgICovXHJcbiAgc3RhdGljIG1peGluKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBmb3IgKHZhciBpIGluIHNvdXJjZSkge1xyXG4gICAgICB0YXJnZXRbaV0gPSBzb3VyY2VbaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9sb2dnZXIobGV2ZWwsIGFyZ3MpIHtcclxuICAgIC8vIGFjY2VwdCBbJ2ZvbycsICdiYXInXSBhbmQgW1snZm9vJywgJ2JhciddXVxyXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxICYmIEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcclxuICAgICAgYXJncyA9IGFyZ3NbMF07XHJcbiAgICB9XHJcbiAgICAvLyBvbmx5IGFjY2VwdCBsb2dnaW5nIGZ1bmN0aW9uc1xyXG4gICAgc3dpdGNoKGxldmVsKSB7XHJcbiAgICAgIGNhc2UgJ2xvZyc6XHJcbiAgICAgIGNhc2UgJ3dhcm4nOlxyXG4gICAgICBjYXNlICdlcnJvcic6XHJcbiAgICAgICAgY29uc29sZVtsZXZlbF0uYXBwbHkoY29uc29sZSwgYXJncyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX2xvZygpIHtcclxuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcclxuICAgIHRoaXMuX2xvZ2dlcignbG9nJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX3dhcm4oKSB7XHJcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XHJcbiAgICB0aGlzLl9sb2dnZXIoJ3dhcm4nLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBfZXJyb3IoKSB7XHJcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XHJcbiAgICB0aGlzLl9sb2dnZXIoJ2Vycm9yJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgbmFtZWQgZXZlbnQgd2l0aCBgbmFtZWBcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIG5hbWUgb2YgdGhlIGV2ZW50XHJcbiAgICogQHJldHVybiB7RXZlbnR9IFJldHVybnMgYSBjcmVhdGVkIGV2ZW50XHJcbiAgICogKi9cclxuICBzdGF0aWMgbmV3RXZlbnQobmFtZSl7XHJcbiAgICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcclxuICAgIGV2ZW50LmluaXRFdmVudChuYW1lLCB0cnVlLCB0cnVlKTtcclxuICAgIHJldHVybiBldmVudDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluc3BlY3RzIGlmIHRoZSBjdXJyZW50IHN0cmluZyBtaWdodCBiZSBjb252ZXJ0ZWQgdG8gbnVtYmVyIGFuZCByZW5kZXJzIGl0IGFzIG51bWJlci4gSWYgc3RyaW5nIGxlbmd0aCBpcyAwLCByZXR1cm5zIGBudWxsYC4gSWYgbm9uZSBhcHBsaWVzIHJldHVybnMgdGhlIHN0cmluZyBhcyBpcy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyIC0gdmFsdWUgb2YgdGhlIGNlbGwgaWYgbm90IEhUTUwgY29udGVudHNcclxuICAgKiBAcmV0dXJuIHtOdW1iZXJ8bnVsbHxTdHJpbmd9XHJcbiAgICogKi9cclxuICBzdGF0aWMgaXNOdW1iZXIoc3RyKXtcclxuICAgIGlmKCFpc05hTihwYXJzZUZsb2F0KHN0cikpKXtcclxuICAgICAgc3RyID0gc3RyLnJlcGxhY2UoLywvaSwnJyk7Ly8gcmVtb3ZlIHVubmVjZXNzYXJ5IGNvbW1hIGFzIGEgZGVsaW1pdGVyIGZvciB0aG91c2FuZHMgZnJvbSBkYXRhLlxyXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChzdHIpO1xyXG4gICAgfSBlbHNlIGlmKHN0ci5sZW5ndGg9PTApe3JldHVybiBudWxsfSBlbHNlIHtyZXR1cm4gc3RyfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYW4gWEhSIHdyYXBwZWQgaW4gYSBQcm9taXNlXHJcbiAgICogQHBhcmFtIHshU3RyaW5nfSBVUkwgLSB1cmwgdG8gc2VuZCBhIGBHRVRgIHJlcXVlc3QgdG9cclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSBSZXR1cm5zIGEgdGhlbi1hYmxlIHByb21pc2Ugd2l0aCBgWE1MSHR0cFJlcXVlc3QucmVzcG9uc2VUZXh0YFxyXG4gICAqICovXHJcbiAgc3RhdGljIHByb21pc2VSZXF1ZXN0KFVSTCl7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KT0+e1xyXG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgIHhoci5vcGVuKCdHRVQnLCBVUkwsIHRydWUpO1xyXG4gICAgICB4aHIub25sb2FkID0gKCk9Pnt4aHIuc3RhdHVzID09IDIwMD9yZXNvbHZlKHhoci5yZXNwb25zZVRleHQpOnJlamVjdChFcnJvcihgJHt4aHIuc3RhdHVzfTogJHt4aHIuc3RhdHVzVGV4dH1gKSk7fVxyXG4gICAgICB4aHIub25lcnJvciA9ICgpPT57cmVqZWN0KEVycm9yKFwiTmV0d29yayBFcnJvclwiKSk7fVxyXG4gICAgICB4aHIuc2VuZCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIGEgdmFyaWFibGUgbGlzdGVkIGluIHF1ZXJ5IHN0cmluZ1xyXG4gICAqIEBwYXJhbSB7IVN0cmluZ30gdmFyaWFibGUgLSB2YXJpYWJsZSBuYW1lIHRvIGdldCB2YWx1ZSBmb3JcclxuICAgKiBAcGFyYW0ge1N0cmluZz19IFtxdWVyeT13aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKV0gLSB0aGUgcXVlcnkgc3RyaW5nIHRvIHNlYXJjaCB2YXJpYWJsZSBmb3IgaW5cclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IFJldHVybnMgdmFsdWUgZm9yIHRoZSB2YXJpYWJsZVxyXG4gICAqICovXHJcbiAgc3RhdGljIGdldFF1ZXJ5VmFyaWFibGUodmFyaWFibGUscXVlcnk9d2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkpe1xyXG4gICAgdmFyIHZhcnMgPSBxdWVyeS5zcGxpdChcIiZcIik7XHJcbiAgICBmb3IgKHZhciBpPTA7aTx2YXJzLmxlbmd0aDtpKyspIHtcclxuICAgICAgdmFyIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcclxuICAgICAgaWYoKHBhaXJbMF0pLnRvTG93ZXJDYXNlKCkgPT0gdmFyaWFibGUudG9Mb3dlckNhc2UoKSl7cmV0dXJuIHBhaXJbMV07fVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxufVxyXG5leHBvcnQgZGVmYXVsdCBSZXBvcnRhbEJhc2VcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9yLXJlcG9ydGFsLWJhc2Uvc3JjL3JlcG9ydGFsLWJhc2UuanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 2 */
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DrilldownMap = function () {\n  function DrilldownMap() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        hierarchy = _ref.hierarchy,\n        containerID = _ref.containerID,\n        _ref$dataClasses = _ref.dataClasses,\n        dataClasses = _ref$dataClasses === undefined ? [{\n      from: 80,\n      to: 100,\n      color: '#8bc34a',\n      name: 'Promoter'\n    }, {\n      from: 60,\n      to: 80,\n      color: '#ffc107',\n      name: 'Passive'\n    }, {\n      from: 0,\n      to: 60,\n      color: '#f44336',\n      name: 'Detractor'\n    }] : _ref$dataClasses,\n        options = _ref.options;\n\n    _classCallCheck(this, DrilldownMap);\n\n    if ((typeof Highcharts === 'undefined' ? 'undefined' : _typeof(Highcharts)) == undefined) {\n      throw new Error('Highcharts must be declared. Probably they are missing');\n    };\n    if (_typeof(Highcharts.maps) == undefined) {\n      throw new Error('HighMaps must be loaded. Probably they are missing');\n    };\n    this.constructor.addMapIDsToHierarchyLevel(hierarchy);\n    this.constructor.drawMap(hierarchy, containerID, dataClasses);\n  }\n\n  _createClass(DrilldownMap, null, [{\n    key: 'createCustomGeoJSON',\n    value: function createCustomGeoJSON(sourceMap, countriesList, mapName) {\n      var geojson = {\n        title: \"\",\n        version: \"0.1.0\",\n        type: \"FeatureCollection\",\n        copyright: \"Copyright (c) 2015 Highsoft AS, Based on data from Natural Earth\",\n        copyrightShort: \"Natural Earth\",\n        copyrightUrl: \"http://www.naturalearthdata.com\",\n        crs: {\n          type: \"name\",\n          properties: {\n            name: \"urn:ogc:def:crs:EPSG:54003\"\n          }\n        },\n        \"hc-transform\": {\n          default: {\n            crs: \"+proj=mill +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +R_A +datum=WGS84 +units=m +no_defs\",\n            scale: 1.72182781654e-05,\n            jsonres: 15.5,\n            jsonmarginX: -999,\n            jsonmarginY: 9851.0,\n            xoffset: -19495356.3693,\n            yoffset: 12635908.1982\n          }\n        },\n        features: []\n      };\n      geojson.title = mapName;\n      if (typeof countriesList === 'string') {\n        sourceMap.features.reverse().forEach(function (feature) {\n          if (feature.properties[\"hc-a2\"] === countriesList) {\n            geojson.features.push(feature);\n          }\n        });\n      } else if (Array.isArray(countriesList)) {\n        countriesList.forEach(function (id) {\n          sourceMap.features.reverse().forEach(function (feature) {\n            if (feature.properties[\"hc-a2\"] === id) {\n              geojson.features.push(feature);\n            }\n          });\n        });\n      }\n      return geojson;\n    }\n  }, {\n    key: 'addMapIDsToHierarchyLevel',\n    value: function addMapIDsToHierarchyLevel(hierarchy) {\n      var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      hierarchy.forEach(function (el) {\n        el.parent = parent;\n        if (el.parent && el.parent.map) {\n          el.map = el.parent.map;\n        }\n        if (el.subcells) {\n          DrilldownMap.addMapIDsToHierarchyLevel(el.subcells, el);\n        }\n        if (el.parent && el.mapID && !el.parent.map) {\n          if (!el.parent.mapID) el.parent.mapID = [];\n          el.parent.mapID = el.parent.mapID.concat(el.mapID);\n        }\n      });\n    }\n  }, {\n    key: 'loadMap',\n    value: function loadMap(source) {\n      var map = new Promise(function (resolve, reject) {\n        $.getScript('https://code.highcharts.com/mapdata/' + source + '.js', function () {\n          resolve(Highcharts.maps[source]);\n        });\n      });\n      return map;\n    }\n  }, {\n    key: 'getSeriesData',\n    value: function getSeriesData(el) {\n      var drilldown = void 0;\n      el.subcells ? drilldown = el.text : drilldown = null;\n      if (typeof el.mapID === 'string') {\n        return [{\n          'drilldown': drilldown,\n          'code': el.mapID,\n          'value': 65\n        }];\n      } else if (Array.isArray(el.mapID)) {\n        return el.mapID.map(function (id) {\n          return {\n            'drilldown': drilldown,\n            'code': id,\n            'value': 88\n          };\n        });\n      } else {\n        throw new Error(\"Data element is corrupted\");\n      }\n    }\n  }, {\n    key: 'initMap',\n    value: function initMap(obj) {\n      var series = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      obj.subcells.forEach(function (el) {\n        if (el.mapID) {\n          series.push(DrilldownMap.composeSeries(el));\n        }\n      });\n      return series;\n    }\n  }, {\n    key: 'composeSeries',\n    value: function composeSeries(el, mapData, chart) {\n      if (el.coordinates) {\n        mapData ? chart.mapTransforms = mapData[\"hc-transform\"] : chart.mapTransforms = Highcharts.maps[\"custom/world-highres2\"][\"hc-transform\"];\n        var pos = chart.fromLatLonToPoint({ lat: el.coordinates[0], lon: el.coordinates[1] });\n        return {\n          events: {\n            // click: onclick function\n          },\n          \"type\": \"mappoint\", // or mapbubble\n          \"name\": el.text,\n          \"marker\": {\n            \"lineColor\": \"black\",\n            \"lineWidth\": 1,\n            \"radius\": 4,\n            \"symbol\": \"circle\"\n          },\n          \"data\": [{\n            \"name\": el.text,\n            \"x\": pos.x,\n            \"y\": pos.y\n          }]\n        };\n      } else {\n        mapData ? mapData = Highcharts.geojson(DrilldownMap.createCustomGeoJSON(mapData, el.mapID, el.text)) : mapData = Highcharts.geojson(DrilldownMap.createCustomGeoJSON(Highcharts.maps['custom/world-highres2'], el.mapID, el.text));\n        if (el.mapID) {\n          var s = {\n            name: el.text,\n            tooltip: {\n              pointFormat: 'NPS : {point.value}'\n            },\n            allAreas: false,\n            parent: el.parent.text,\n            mapData: mapData,\n            joinBy: ['hc-a2', 'code'],\n            data: DrilldownMap.getSeriesData(el)\n          };\n          return s;\n        }\n      }\n    }\n  }, {\n    key: 'updateMap',\n    value: function updateMap(curLVL, chart, e) {\n      curLVL = curLVL.subcells.filter(function (el) {\n        return el.text == e.point.series.name;\n      })[0];\n      if (curLVL && curLVL.map) {\n        // if we have another map to load\n        var map = DrilldownMap.loadMap(curLVL.map);\n        map.then(function (mapData) {\n          //chart.addSingleSeriesAsDrilldown(e.point,{mapData});\n          DrilldownMap.addSeries(curLVL, chart, e, mapData);\n        });\n      } else if (curLVL && !curLVL.map) {\n        DrilldownMap.addSeries(curLVL, chart, e);\n      }\n      return curLVL;\n    }\n  }, {\n    key: 'addSeries',\n    value: function addSeries(curLVL, chart, e, mapData) {\n      if (curLVL.subcells && curLVL.isGlobal) {\n        if (!curLVL.subcells[0].isGlobal) {\n          var a = DrilldownMap.composeSeries(curLVL, mapData, chart);\n          a.data.map(function (el) {\n            el.drilldown = null, el.value = null;\n          });\n          chart.addSingleSeriesAsDrilldown(e.point, a);\n        }\n        curLVL.subcells.forEach(function (el) {\n          var a = DrilldownMap.composeSeries(el, mapData, chart);\n          chart.addSingleSeriesAsDrilldown(e.point, a);\n        });\n        chart.applyDrilldown();\n      } else {\n        var _a = DrilldownMap.composeSeries(curLVL, mapData, chart);\n        _a.data.map(function (el) {\n          el.drilldown = null, el.value = null;\n        });\n        chart.addSeriesAsDrilldown(e.point, _a);\n      }\n    }\n  }, {\n    key: 'drawMap',\n    value: function drawMap(hierarchy, containerID, dataClasses) {\n      var curLVL = hierarchy[0];\n      Highcharts.mapChart(containerID, {\n        lang: {\n          drillUpText: 'Back to {series.parent}'\n        },\n        tooltip: {\n          pointFormat: 'NPS : {point.value}'\n        },\n        title: {\n          text: 'Drilldown map'\n        },\n        legend: {\n          enabled: false\n        },\n        colorAxis: {\n          dataClasses: dataClasses\n        },\n        mapNavigation: {\n          enabled: true\n        },\n        chart: {\n          events: {\n            drilldown: function drilldown(e) {\n              var chart = this;\n              curLVL = DrilldownMap.updateMap(curLVL, chart, e);\n            },\n            drillupall: function drillupall(e) {\n              curLVL = curLVL.parent;\n            }\n          }\n        },\n        series: DrilldownMap.initMap(curLVL, [{\n          mapData: Highcharts.maps[\"custom/world-highres2\"]\n        }])\n      });\n    }\n  }]);\n\n  return DrilldownMap;\n}();\n\nexports.default = DrilldownMap;\nmodule.exports = exports['default'];//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvRHJpbGxkb3duTWFwLmpzP2UwMjkiXSwibmFtZXMiOlsiRHJpbGxkb3duTWFwIiwiaGllcmFyY2h5IiwiY29udGFpbmVySUQiLCJkYXRhQ2xhc3NlcyIsImZyb20iLCJ0byIsImNvbG9yIiwibmFtZSIsIm9wdGlvbnMiLCJIaWdoY2hhcnRzIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJtYXBzIiwiY29uc3RydWN0b3IiLCJhZGRNYXBJRHNUb0hpZXJhcmNoeUxldmVsIiwiZHJhd01hcCIsInNvdXJjZU1hcCIsImNvdW50cmllc0xpc3QiLCJtYXBOYW1lIiwiZ2VvanNvbiIsInRpdGxlIiwidmVyc2lvbiIsInR5cGUiLCJjb3B5cmlnaHQiLCJjb3B5cmlnaHRTaG9ydCIsImNvcHlyaWdodFVybCIsImNycyIsInByb3BlcnRpZXMiLCJkZWZhdWx0Iiwic2NhbGUiLCJqc29ucmVzIiwianNvbm1hcmdpblgiLCJqc29ubWFyZ2luWSIsInhvZmZzZXQiLCJ5b2Zmc2V0IiwiZmVhdHVyZXMiLCJyZXZlcnNlIiwiZm9yRWFjaCIsImZlYXR1cmUiLCJwdXNoIiwiQXJyYXkiLCJpc0FycmF5IiwiaWQiLCJwYXJlbnQiLCJlbCIsIm1hcCIsInN1YmNlbGxzIiwibWFwSUQiLCJjb25jYXQiLCJzb3VyY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIiQiLCJnZXRTY3JpcHQiLCJkcmlsbGRvd24iLCJ0ZXh0Iiwib2JqIiwic2VyaWVzIiwiY29tcG9zZVNlcmllcyIsIm1hcERhdGEiLCJjaGFydCIsImNvb3JkaW5hdGVzIiwibWFwVHJhbnNmb3JtcyIsInBvcyIsImZyb21MYXRMb25Ub1BvaW50IiwibGF0IiwibG9uIiwiZXZlbnRzIiwieCIsInkiLCJjcmVhdGVDdXN0b21HZW9KU09OIiwicyIsInRvb2x0aXAiLCJwb2ludEZvcm1hdCIsImFsbEFyZWFzIiwiam9pbkJ5IiwiZGF0YSIsImdldFNlcmllc0RhdGEiLCJjdXJMVkwiLCJlIiwiZmlsdGVyIiwicG9pbnQiLCJsb2FkTWFwIiwidGhlbiIsImFkZFNlcmllcyIsImlzR2xvYmFsIiwiYSIsInZhbHVlIiwiYWRkU2luZ2xlU2VyaWVzQXNEcmlsbGRvd24iLCJhcHBseURyaWxsZG93biIsImFkZFNlcmllc0FzRHJpbGxkb3duIiwibWFwQ2hhcnQiLCJsYW5nIiwiZHJpbGxVcFRleHQiLCJsZWdlbmQiLCJlbmFibGVkIiwiY29sb3JBeGlzIiwibWFwTmF2aWdhdGlvbiIsInVwZGF0ZU1hcCIsImRyaWxsdXBhbGwiLCJpbml0TWFwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7SUFBTUEsWTtBQUNKLDBCQWVnQjtBQUFBLG1GQUFILEVBQUc7QUFBQSxRQWZIQyxTQWVHLFFBZkhBLFNBZUc7QUFBQSxRQWZRQyxXQWVSLFFBZlFBLFdBZVI7QUFBQSxnQ0FmcUJDLFdBZXJCO0FBQUEsUUFmcUJBLFdBZXJCLG9DQWZtQyxDQUFDO0FBQ2xEQyxZQUFNLEVBRDRDO0FBRWxEQyxVQUFJLEdBRjhDO0FBR2xEQyxhQUFPLFNBSDJDO0FBSWxEQyxZQUFNO0FBSjRDLEtBQUQsRUFLakQ7QUFDQUgsWUFBTSxFQUROO0FBRUFDLFVBQUksRUFGSjtBQUdBQyxhQUFPLFNBSFA7QUFJQUMsWUFBTTtBQUpOLEtBTGlELEVBVWpEO0FBQ0FILFlBQU0sQ0FETjtBQUVBQyxVQUFJLEVBRko7QUFHQUMsYUFBTyxTQUhQO0FBSUFDLFlBQU07QUFKTixLQVZpRCxDQWVuQztBQUFBLFFBQVpDLE9BQVksUUFBWkEsT0FBWTs7QUFBQTs7QUFDZCxRQUFHLFFBQU9DLFVBQVAseUNBQU9BLFVBQVAsTUFBcUJDLFNBQXhCLEVBQWtDO0FBQUMsWUFBTSxJQUFJQyxLQUFKLENBQVUsd0RBQVYsQ0FBTjtBQUEwRTtBQUM3RyxRQUFHLFFBQU9GLFdBQVdHLElBQWxCLEtBQTBCRixTQUE3QixFQUF1QztBQUFDLFlBQU0sSUFBSUMsS0FBSixDQUFVLG9EQUFWLENBQU47QUFBc0U7QUFDOUcsU0FBS0UsV0FBTCxDQUFpQkMseUJB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O0FBQ0pPLGtCQUFRO0FBQ05iLHVCQUFXLG1CQUFTeUIsQ0FBVCxFQUFXO0FBQ3BCLGtCQUFJbkIsUUFBUSxJQUFaO0FBQ0FrQix1QkFBUy9FLGFBQWFtRyxTQUFiLENBQXVCcEIsTUFBdkIsRUFBK0JsQixLQUEvQixFQUFzQ21CLENBQXRDLENBQVQ7QUFDRCxhQUpLO0FBS05vQix3QkFBWSxvQkFBU3BCLENBQVQsRUFBVztBQUNyQkQsdUJBQVNBLE9BQU9wQyxNQUFoQjtBQUNEO0FBUEs7QUFESixTQW5CMEI7QUE4QmhDZSxnQkFBUTFELGFBQWFxRyxPQUFiLENBQXFCdEIsTUFBckIsRUFBNEIsQ0FBQztBQUNuQ25CLG1CQUFTbkQsV0FBV0csSUFBWCxDQUFnQix1QkFBaEI7QUFEMEIsU0FBRCxDQUE1QjtBQTlCd0IsT0FBbEM7QUFrQ0Q7Ozs7OztrQkFHWVosWSIsImZpbGUiOiIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRHJpbGxkb3duTWFwIHtcbiAgY29uc3RydWN0b3Ioe2hpZXJhcmNoeSwgY29udGFpbmVySUQsIGRhdGFDbGFzc2VzID0gW3tcbiAgICBmcm9tOiA4MCxcbiAgICB0bzogMTAwLFxuICAgIGNvbG9yOiAnIzhiYzM0YScsXG4gICAgbmFtZTogJ1Byb21vdGVyJ1xuICB9LHtcbiAgICBmcm9tOiA2MCxcbiAgICB0bzogODAsXG4gICAgY29sb3I6ICcjZmZjMTA3JyxcbiAgICBuYW1lOiAnUGFzc2l2ZSdcbiAgfSx7XG4gICAgZnJvbTogMCxcbiAgICB0bzogNjAsXG4gICAgY29sb3I6ICcjZjQ0MzM2JyxcbiAgICBuYW1lOiAnRGV0cmFjdG9yJ1xuICB9XSwgb3B0aW9uc309e30pe1xuICAgIGlmKHR5cGVvZiBIaWdoY2hhcnRzID09IHVuZGVmaW5lZCl7dGhyb3cgbmV3IEVycm9yKCdIaWdoY2hhcnRzIG11c3QgYmUgZGVjbGFyZWQuIFByb2JhYmx5IHRoZXkgYXJlIG1pc3NpbmcnKX07XG4gICAgaWYodHlwZW9mIEhpZ2hjaGFydHMubWFwcyA9PSB1bmRlZmluZWQpe3Rocm93IG5ldyBFcnJvcignSGlnaE1hcHMgbXVzdCBiZSBsb2FkZWQuIFByb2JhYmx5IHRoZXkgYXJlIG1pc3NpbmcnKX07XG4gICAgdGhpcy5jb25zdHJ1Y3Rvci5hZGRNYXBJRHNUb0hpZXJhcmNoeUxldmVsKGhpZXJhcmNoeSk7XG4gICAgdGhpcy5jb25zdHJ1Y3Rvci5kcmF3TWFwKGhpZXJhcmNoeSwgY29udGFpbmVySUQsIGRhdGFDbGFzc2VzKTtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVDdXN0b21HZW9KU09OKHNvdXJjZU1hcCwgY291bnRyaWVzTGlzdCwgbWFwTmFtZSkge1xuICAgIGxldCBnZW9qc29uID0ge1xuICAgICAgdGl0bGU6XCJcIixcbiAgICAgIHZlcnNpb246XCIwLjEuMFwiLFxuICAgICAgdHlwZTpcIkZlYXR1cmVDb2xsZWN0aW9uXCIsXG4gICAgICBjb3B5cmlnaHQ6XCJDb3B5cmlnaHQgKGMpIDIwMTUgSGlnaHNvZnQgQVMsIEJhc2VkIG9uIGRhdGEgZnJvbSBOYXR1cmFsIEVhcnRoXCIsXG4gICAgICBjb3B5cmlnaHRTaG9ydDpcIk5hdHVyYWwgRWFydGhcIixcbiAgICAgIGNvcHlyaWdodFVybDpcImh0dHA6Ly93d3cubmF0dXJhbGVhcnRoZGF0YS5jb21cIixcbiAgICAgIGNyczp7XG4gICAgICAgIHR5cGU6XCJuYW1lXCIsXG4gICAgICAgIHByb3BlcnRpZXM6e1xuICAgICAgICAgIG5hbWU6XCJ1cm46b2djOmRlZjpjcnM6RVBTRzo1NDAwM1wiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcImhjLXRyYW5zZm9ybVwiOntcbiAgICAgICAgZGVmYXVsdDp7XG4gICAgICAgICAgY3JzOlwiK3Byb2o9bWlsbCArbGF0XzA9MCArbG9uXzA9MCAreF8wPTAgK3lfMD0wICtSX0EgK2RhdHVtPVdHUzg0ICt1bml0cz1tICtub19kZWZzXCIsXG4gICAgICAgICAgc2NhbGU6MS43MjE4Mjc4MTY1NGUtMDUsXG4gICAgICAgICAganNvbnJlczoxNS41LFxuICAgICAgICAgIGpzb25tYXJnaW5YOi05OTksXG4gICAgICAgICAganNvbm1hcmdpblk6OTg1MS4wLFxuICAgICAgICAgIHhvZmZzZXQ6LTE5NDk1MzU2LjM2OTMsXG4gICAgICAgICAgeW9mZnNldDoxMjYzNTkwOC4xOTgyXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmZWF0dXJlczpbXVxuICAgIH07XG4gICAgZ2VvanNvbi50aXRsZSA9IG1hcE5hbWU7XG4gICAgaWYgKHR5cGVvZiBjb3VudHJpZXNMaXN0ID09PSAnc3RyaW5nJyl7XG4gICAgICBzb3VyY2VNYXAuZmVhdHVyZXMucmV2ZXJzZSgpLmZvckVhY2goZmVhdHVyZSA9PiB7XG4gICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXNbXCJoYy1hMlwiXSA9PT0gY291bnRyaWVzTGlzdCkge1xuICAgICAgICAgIGdlb2pzb24uZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY291bnRyaWVzTGlzdCkpe1xuICAgICAgY291bnRyaWVzTGlzdC5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgc291cmNlTWFwLmZlYXR1cmVzLnJldmVyc2UoKS5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXNbXCJoYy1hMlwiXSA9PT0gaWQpIHtcbiAgICAgICAgICAgIGdlb2pzb24uZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGdlb2pzb247XG4gIH1cblxuICBzdGF0aWMgYWRkTWFwSURzVG9IaWVyYXJjaHlMZXZlbChoaWVyYXJjaHksIHBhcmVudCA9IG51bGwpIHtcbiAgICBoaWVyYXJjaHkuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICBpZihlbC5wYXJlbnQgJiYgZWwucGFyZW50Lm1hcCl7XG4gICAgICAgIGVsLm1hcCA9IGVsLnBhcmVudC5tYXA7XG4gICAgICB9XG4gICAgICBpZiAoZWwuc3ViY2VsbHMpIHtcbiAgICAgICAgRHJpbGxkb3duTWFwLmFkZE1hcElEc1RvSGllcmFyY2h5TGV2ZWwoZWwuc3ViY2VsbHMsIGVsKTtcbiAgICAgIH1cbiAgICAgIGlmKGVsLnBhcmVudCAmJiBlbC5tYXBJRCAmJiAhZWwucGFyZW50Lm1hcCl7XG4gICAgICAgIGlmKCFlbC5wYXJlbnQubWFwSUQpXG4gICAgICAgICAgZWwucGFyZW50Lm1hcElEID0gW107XG4gICAgICAgIGVsLnBhcmVudC5tYXBJRCA9IGVsLnBhcmVudC5tYXBJRC5jb25jYXQoZWwubWFwSUQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGxvYWRNYXAoc291cmNlKXtcbiAgICBsZXQgbWFwID0gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KT0+e1xuICAgICAgJC5nZXRTY3JpcHQoJ2h0dHBzOi8vY29kZS5oaWdoY2hhcnRzLmNvbS9tYXBkYXRhLycgKyBzb3VyY2UgKyAnLmpzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXNvbHZlKEhpZ2hjaGFydHMubWFwc1tzb3VyY2VdKSA7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gbWFwO1xuICB9XG5cbiAgc3RhdGljIGdldFNlcmllc0RhdGEoZWwpe1xuICAgIGxldCBkcmlsbGRvd247XG4gICAgZWwuc3ViY2VsbHMgPyBkcmlsbGRvd24gPSBlbC50ZXh0IDogZHJpbGxkb3duID0gbnVsbDtcbiAgICBpZiAodHlwZW9mIGVsLm1hcElEID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgICdkcmlsbGRvd24nOiBkcmlsbGRvd24sXG4gICAgICAgICdjb2RlJzogZWwubWFwSUQsXG4gICAgICAgICd2YWx1ZSc6IDY1XG4gICAgICB9XVxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlbC5tYXBJRCkpe1xuICAgICAgcmV0dXJuIGVsLm1hcElELm1hcChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAnZHJpbGxkb3duJzogZHJpbGxkb3duLFxuICAgICAgICAgICdjb2RlJzogaWQsXG4gICAgICAgICAgJ3ZhbHVlJzogODhcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGEgZWxlbWVudCBpcyBjb3JydXB0ZWRcIik7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGluaXRNYXAob2JqLCBzZXJpZXMgPSBbXSl7XG4gICAgb2JqLnN1YmNlbGxzLmZvckVhY2goIGVsID0+IHtcbiAgICAgIGlmIChlbC5tYXBJRCkge1xuICAgICAgICBzZXJpZXMucHVzaChEcmlsbGRvd25NYXAuY29tcG9zZVNlcmllcyhlbCkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzZXJpZXM7XG4gIH1cbiAgc3RhdGljIGNvbXBvc2VTZXJpZXMoZWwsbWFwRGF0YSxjaGFydCl7XG4gICAgaWYoZWwuY29vcmRpbmF0ZXMpe1xuICAgICAgbWFwRGF0YSA/IGNoYXJ0Lm1hcFRyYW5zZm9ybXMgPSBtYXBEYXRhW1wiaGMtdHJhbnNmb3JtXCJdIDogY2hhcnQubWFwVHJhbnNmb3JtcyA9IEhpZ2hjaGFydHMubWFwc1tcImN1c3RvbS93b3JsZC1oaWdocmVzMlwiXVtcImhjLXRyYW5zZm9ybVwiXTtcbiAgICAgIGxldCBwb3MgPSBjaGFydC5mcm9tTGF0TG9uVG9Qb2ludCh7IGxhdDogZWwuY29vcmRpbmF0ZXNbMF0sIGxvbjogZWwuY29vcmRpbmF0ZXNbMV0gfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICAvLyBjbGljazogb25jbGljayBmdW5jdGlvblxuICAgICAgICB9LFxuICAgICAgICBcInR5cGVcIjogXCJtYXBwb2ludFwiLCAvLyBvciBtYXBidWJibGVcbiAgICAgICAgXCJuYW1lXCI6IGVsLnRleHQsXG4gICAgICAgIFwibWFya2VyXCI6IHtcbiAgICAgICAgICBcImxpbmVDb2xvclwiOiBcImJsYWNrXCIsXG4gICAgICAgICAgXCJsaW5lV2lkdGhcIjogMSxcbiAgICAgICAgICBcInJhZGl1c1wiOiA0LFxuICAgICAgICAgIFwic3ltYm9sXCI6IFwiY2lyY2xlXCIsXG4gICAgICAgIH0sXG4gICAgICAgIFwiZGF0YVwiOiBbe1xuICAgICAgICAgIFwibmFtZVwiOiBlbC50ZXh0LFxuICAgICAgICAgIFwieFwiOiBwb3MueCxcbiAgICAgICAgICBcInlcIjogcG9zLnlcbiAgICAgICAgfV1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbWFwRGF0YSA/IG1hcERhdGEgPSBIaWdoY2hhcnRzLmdlb2pzb24oRHJpbGxkb3duTWFwLmNyZWF0ZUN1c3RvbUdlb0pTT04obWFwRGF0YSwgZWwubWFwSUQsIGVsLnRleHQpKSA6XG4gICAgICAgIG1hcERhdGEgPSBIaWdoY2hhcnRzLmdlb2pzb24oRHJpbGxkb3duTWFwLmNyZWF0ZUN1c3RvbUdlb0pTT04oSGlnaGNoYXJ0cy5tYXBzWydjdXN0b20vd29ybGQtaGlnaHJlczInXSwgZWwubWFwSUQsIGVsLnRleHQpKTtcbiAgICAgIGlmIChlbC5tYXBJRCkge1xuICAgICAgICBsZXQgcyA9IHtcbiAgICAgICAgICBuYW1lOiBlbC50ZXh0LFxuICAgICAgICAgIHRvb2x0aXA6IHtcbiAgICAgICAgICAgIHBvaW50Rm9ybWF0OiAnTlBTIDoge3BvaW50LnZhbHVlfSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFsbEFyZWFzOiBmYWxzZSxcbiAgICAgICAgICBwYXJlbnQ6IGVsLnBhcmVudC50ZXh0LFxuICAgICAgICAgIG1hcERhdGEsXG4gICAgICAgICAgam9pbkJ5OiBbJ2hjLWEyJywgJ2NvZGUnXSxcbiAgICAgICAgICBkYXRhOiBEcmlsbGRvd25NYXAuZ2V0U2VyaWVzRGF0YShlbClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHN0YXRpYyB1cGRhdGVNYXAoY3VyTFZMLCBjaGFydCwgZSl7XG4gICAgY3VyTFZMID0gY3VyTFZMLnN1YmNlbGxzLmZpbHRlciggZWwgPT4gZWwudGV4dCA9PSBlLnBvaW50LnNlcmllcy5uYW1lKVswXTtcbiAgICBpZihjdXJMVkwgJiYgY3VyTFZMLm1hcCl7Ly8gaWYgd2UgaGF2ZSBhbm90aGVyIG1hcCB0byBsb2FkXG4gICAgICBsZXQgbWFwID0gRHJpbGxkb3duTWFwLmxvYWRNYXAoY3VyTFZMLm1hcCk7XG4gICAgICBtYXAudGhlbihtYXBEYXRhPT57XG4gICAgICAgIC8vY2hhcnQuYWRkU2luZ2xlU2VyaWVzQXNEcmlsbGRvd24oZS5wb2ludCx7bWFwRGF0YX0pO1xuICAgICAgICBEcmlsbGRvd25NYXAuYWRkU2VyaWVzKGN1ckxWTCxjaGFydCxlLG1hcERhdGEpXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYoY3VyTFZMICYmICFjdXJMVkwubWFwKXtcbiAgICAgIERyaWxsZG93bk1hcC5hZGRTZXJpZXMoY3VyTFZMLGNoYXJ0LGUpO1xuICAgIH1cbiAgICByZXR1cm4gY3VyTFZMO1xuICB9XG5cbiAgc3RhdGljIGFkZFNlcmllcyhjdXJMVkwsY2hhcnQsZSxtYXBEYXRhKXtcbiAgICBpZiAoY3VyTFZMLnN1YmNlbGxzICYmIGN1ckxWTC5pc0dsb2JhbCkge1xuICAgICAgaWYoIWN1ckxWTC5zdWJjZWxsc1swXS5pc0dsb2JhbCl7XG4gICAgICAgIGxldCBhID0gRHJpbGxkb3duTWFwLmNvbXBvc2VTZXJpZXMoY3VyTFZMLG1hcERhdGEsIGNoYXJ0KTtcbiAgICAgICAgYS5kYXRhLm1hcChlbCA9PiB7ZWwuZHJpbGxkb3duID0gbnVsbCwgZWwudmFsdWUgPSBudWxsfSk7XG4gICAgICAgIGNoYXJ0LmFkZFNpbmdsZVNlcmllc0FzRHJpbGxkb3duKGUucG9pbnQsIGEpO1xuICAgICAgfVxuICAgICAgY3VyTFZMLnN1YmNlbGxzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBsZXQgYSA9IERyaWxsZG93bk1hcC5jb21wb3NlU2VyaWVzKGVsLG1hcERhdGEsIGNoYXJ0KTtcbiAgICAgICAgY2hhcnQuYWRkU2luZ2xlU2VyaWVzQXNEcmlsbGRvd24oZS5wb2ludCwgYSk7XG4gICAgICB9KTtcbiAgICAgIGNoYXJ0LmFwcGx5RHJpbGxkb3duKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGEgPSBEcmlsbGRvd25NYXAuY29tcG9zZVNlcmllcyhjdXJMVkwsIG1hcERhdGEsIGNoYXJ0KTtcbiAgICAgICAgYS5kYXRhLm1hcChlbCA9PiB7ZWwuZHJpbGxkb3duID0gbnVsbCwgZWwudmFsdWUgPSBudWxsfSk7XG4gICAgICAgIGNoYXJ0LmFkZFNlcmllc0FzRHJpbGxkb3duKGUucG9pbnQsIGEpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBkcmF3TWFwKGhpZXJhcmNoeSwgY29udGFpbmVySUQsIGRhdGFDbGFzc2VzKXtcbiAgICBsZXQgY3VyTFZMID0gaGllcmFyY2h5WzBdO1xuICAgIEhpZ2hjaGFydHMubWFwQ2hhcnQoIGNvbnRhaW5lcklELCB7XG4gICAgICBsYW5nOiB7XG4gICAgICAgIGRyaWxsVXBUZXh0OiAnQmFjayB0byB7c2VyaWVzLnBhcmVudH0nXG4gICAgICB9LFxuICAgICAgdG9vbHRpcDoge1xuICAgICAgICBwb2ludEZvcm1hdDogJ05QUyA6IHtwb2ludC52YWx1ZX0nXG4gICAgICB9LFxuICAgICAgdGl0bGU6IHtcbiAgICAgICAgdGV4dDogJ0RyaWxsZG93biBtYXAnXG4gICAgICB9LFxuICAgICAgbGVnZW5kOiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICB9LFxuICAgICAgY29sb3JBeGlzOiB7XG4gICAgICAgIGRhdGFDbGFzc2VzXG4gICAgICB9LFxuICAgICAgICBtYXBOYXZpZ2F0aW9uOiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgY2hhcnQ6e1xuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICBkcmlsbGRvd246IGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgbGV0IGNoYXJ0ID0gdGhpcztcbiAgICAgICAgICAgIGN1ckxWTCA9IERyaWxsZG93bk1hcC51cGRhdGVNYXAoY3VyTFZMLCBjaGFydCwgZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkcmlsbHVwYWxsOiBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIGN1ckxWTCA9IGN1ckxWTC5wYXJlbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2VyaWVzOiBEcmlsbGRvd25NYXAuaW5pdE1hcChjdXJMVkwsW3tcbiAgICAgICAgbWFwRGF0YTogSGlnaGNoYXJ0cy5tYXBzW1wiY3VzdG9tL3dvcmxkLWhpZ2hyZXMyXCJdXG4gICAgICB9XSlcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEcmlsbGRvd25NYXA7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvRHJpbGxkb3duTWFwLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);
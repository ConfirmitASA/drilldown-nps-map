/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _DrilldownMap = __webpack_require__(2);\n\nvar _DrilldownMap2 = _interopRequireDefault(_DrilldownMap);\n\nvar _rReportalBase = __webpack_require__(1);\n\nvar _rReportalBase2 = _interopRequireDefault(_rReportalBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.Reportal = window.Reportal || {};\n_rReportalBase2.default.mixin(window.Reportal, {\n  DrilldownMap: _DrilldownMap2.default\n});\n\nexports.default = Reportal;\nmodule.exports = exports['default'];//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcz8zNDc5Il0sIm5hbWVzIjpbIndpbmRvdyIsIlJlcG9ydGFsIiwibWl4aW4iLCJEcmlsbGRvd25NYXAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBQSxPQUFPQyxRQUFQLEdBQWtCRCxPQUFPQyxRQUFQLElBQW1CLEVBQXJDO0FBQ0Esd0JBQWFDLEtBQWIsQ0FBbUJGLE9BQU9DLFFBQTFCLEVBQW1DO0FBQ2pDRTtBQURpQyxDQUFuQzs7a0JBSWVGLFEiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IERyaWxsZG93bk1hcCBmcm9tIFwiLi9EcmlsbGRvd25NYXBcIjtcbmltcG9ydCBSZXBvcnRhbEJhc2UgZnJvbSBcInItcmVwb3J0YWwtYmFzZVwiO1xuXG53aW5kb3cuUmVwb3J0YWwgPSB3aW5kb3cuUmVwb3J0YWwgfHwge31cblJlcG9ydGFsQmFzZS5taXhpbih3aW5kb3cuUmVwb3J0YWwse1xuICBEcmlsbGRvd25NYXBcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBSZXBvcnRhbFxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL21haW4uanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 1 */
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ReportalBase = function () {\n  function ReportalBase() {\n    _classCallCheck(this, ReportalBase);\n  }\n\n  _createClass(ReportalBase, null, [{\n    key: 'mixin',\n\n\n    /**\r\n     * Copies props from a source object to a target object.\r\n     *\r\n     * Note, this method uses a simple `for...in` strategy for enumerating\r\n     * properties.  To ensure only `ownProperties` are copied from source\r\n     * to target and that accessor implementations are copied, use `extend`.\r\n     *\r\n     * @method mixin\r\n     * @param {Object} target Target object to copy properties to.\r\n     * @param {Object} source Source object to copy properties from.\r\n     * @return {Object} Target object that was passed as first argument.\r\n     */\n    value: function mixin(target, source) {\n      for (var i in source) {\n        target[i] = source[i];\n      }\n      return target;\n    }\n  }, {\n    key: '_logger',\n    value: function _logger(level, args) {\n      // accept ['foo', 'bar'] and [['foo', 'bar']]\n      if (args.length === 1 && Array.isArray(args[0])) {\n        args = args[0];\n      }\n      // only accept logging functions\n      switch (level) {\n        case 'log':\n        case 'warn':\n        case 'error':\n          console[level].apply(console, args);\n          break;\n      }\n    }\n  }, {\n    key: '_log',\n    value: function _log() {\n      var args = Array.prototype.slice.call(arguments, 0);\n      this._logger('log', args);\n    }\n  }, {\n    key: '_warn',\n    value: function _warn() {\n      var args = Array.prototype.slice.call(arguments, 0);\n      this._logger('warn', args);\n    }\n  }, {\n    key: '_error',\n    value: function _error() {\n      var args = Array.prototype.slice.call(arguments, 0);\n      this._logger('error', args);\n    }\n\n    /**\r\n     * Creates a named event with `name`\r\n     * @param {String} name - name of the event\r\n     * @return {Event} Returns a created event\r\n     * */\n\n  }, {\n    key: 'newEvent',\n    value: function newEvent(name) {\n      var event = document.createEvent('Event');\n      event.initEvent(name, true, true);\n      return event;\n    }\n\n    /**\r\n     * Inspects if the current string might be converted to number and renders it as number. If string length is 0, returns `null`. If none applies returns the string as is.\r\n     * @param {String} str - value of the cell if not HTML contents\r\n     * @return {Number|null|String}\r\n     * */\n\n  }, {\n    key: 'isNumber',\n    value: function isNumber(str) {\n      if (!isNaN(parseFloat(str))) {\n        str = str.replace(/,/i, ''); // remove unnecessary comma as a delimiter for thousands from data.\n        return parseFloat(str);\n      } else if (str.length == 0) {\n        return null;\n      } else {\n        return str;\n      }\n    }\n\n    /**\r\n     * Creates an XHR wrapped in a Promise\r\n     * @param {!String} URL - url to send a `GET` request to\r\n     * @return {Promise} Returns a then-able promise with `XMLHttpRequest.responseText`\r\n     * */\n\n  }, {\n    key: 'promiseRequest',\n    value: function promiseRequest(URL) {\n      return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', URL, true);\n        xhr.onload = function () {\n          xhr.status == 200 ? resolve(xhr.responseText) : reject(Error(xhr.status + ': ' + xhr.statusText));\n        };\n        xhr.onerror = function () {\n          reject(Error(\"Network Error\"));\n        };\n        xhr.send();\n      });\n    }\n\n    /**\r\n     * Gets a variable listed in query string\r\n     * @param {!String} variable - variable name to get value for\r\n     * @param {String=} [query=window.location.search.substring(1)] - the query string to search variable for in\r\n     * @return {String} Returns value for the variable\r\n     * */\n\n  }, {\n    key: 'getQueryVariable',\n    value: function getQueryVariable(variable) {\n      var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.location.search.substring(1);\n\n      var vars = query.split(\"&\");\n      for (var i = 0; i < vars.length; i++) {\n        var pair = vars[i].split(\"=\");\n        if (pair[0].toLowerCase() == variable.toLowerCase()) {\n          return pair[1];\n        }\n      }\n      return null;\n    }\n  }]);\n\n  return ReportalBase;\n}();\n\nexports.default = ReportalBase;\nmodule.exports = exports['default'];//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L3ItcmVwb3J0YWwtYmFzZS9zcmMvcmVwb3J0YWwtYmFzZS5qcz9kYTM1Il0sIm5hbWVzIjpbIlJlcG9ydGFsQmFzZSIsInRhcmdldCIsInNvdXJjZSIsImkiLCJsZXZlbCIsImFyZ3MiLCJsZW5ndGgiLCJBcnJheSIsImlzQXJyYXkiLCJjb25zb2xlIiwiYXBwbHkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJfbG9nZ2VyIiwibmFtZSIsImV2ZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFdmVudCIsImluaXRFdmVudCIsInN0ciIsImlzTmFOIiwicGFyc2VGbG9hdCIsInJlcGxhY2UiLCJVUkwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ubG9hZCIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsIkVycm9yIiwic3RhdHVzVGV4dCIsIm9uZXJyb3IiLCJzZW5kIiwidmFyaWFibGUiLCJxdWVyeSIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwidmFycyIsInNwbGl0IiwicGFpciIsInRvTG93ZXJDYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBQU1BLFk7Ozs7Ozs7OztBQUVKOzs7Ozs7Ozs7Ozs7MEJBWWFDLE0sRUFBUUMsTSxFQUFRO0FBQzNCLFdBQUssSUFBSUMsQ0FBVCxJQUFjRCxNQUFkLEVBQXNCO0FBQ3BCRCxlQUFPRSxDQUFQLElBQVlELE9BQU9DLENBQVAsQ0FBWjtBQUNEO0FBQ0QsYUFBT0YsTUFBUDtBQUNEOzs7NEJBRWNHLEssRUFBT0MsSSxFQUFNO0FBQzFCO0FBQ0EsVUFBSUEsS0FBS0MsTUFBTCxLQUFnQixDQUFoQixJQUFxQkMsTUFBTUMsT0FBTixDQUFjSCxLQUFLLENBQUwsQ0FBZCxDQUF6QixFQUFpRDtBQUMvQ0EsZUFBT0EsS0FBSyxDQUFMLENBQVA7QUFDRDtBQUNEO0FBQ0Es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Ozs7a0JBR1kvQyxZIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBSZXBvcnRhbEJhc2Uge1xyXG5cclxuICAvKipcclxuICAgKiBDb3BpZXMgcHJvcHMgZnJvbSBhIHNvdXJjZSBvYmplY3QgdG8gYSB0YXJnZXQgb2JqZWN0LlxyXG4gICAqXHJcbiAgICogTm90ZSwgdGhpcyBtZXRob2QgdXNlcyBhIHNpbXBsZSBgZm9yLi4uaW5gIHN0cmF0ZWd5IGZvciBlbnVtZXJhdGluZ1xyXG4gICAqIHByb3BlcnRpZXMuICBUbyBlbnN1cmUgb25seSBgb3duUHJvcGVydGllc2AgYXJlIGNvcGllZCBmcm9tIHNvdXJjZVxyXG4gICAqIHRvIHRhcmdldCBhbmQgdGhhdCBhY2Nlc3NvciBpbXBsZW1lbnRhdGlvbnMgYXJlIGNvcGllZCwgdXNlIGBleHRlbmRgLlxyXG4gICAqXHJcbiAgICogQG1ldGhvZCBtaXhpblxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGFyZ2V0IG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgdG8uXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBTb3VyY2Ugb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tLlxyXG4gICAqIEByZXR1cm4ge09iamVjdH0gVGFyZ2V0IG9iamVjdCB0aGF0IHdhcyBwYXNzZWQgYXMgZmlyc3QgYXJndW1lbnQuXHJcbiAgICovXHJcbiAgc3RhdGljIG1peGluKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBmb3IgKHZhciBpIGluIHNvdXJjZSkge1xyXG4gICAgICB0YXJnZXRbaV0gPSBzb3VyY2VbaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIF9sb2dnZXIobGV2ZWwsIGFyZ3MpIHtcclxuICAgIC8vIGFjY2VwdCBbJ2ZvbycsICdiYXInXSBhbmQgW1snZm9vJywgJ2JhciddXVxyXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxICYmIEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcclxuICAgICAgYXJncyA9IGFyZ3NbMF07XHJcbiAgICB9XHJcbiAgICAvLyBvbmx5IGFjY2VwdCBsb2dnaW5nIGZ1bmN0aW9uc1xyXG4gICAgc3dpdGNoKGxldmVsKSB7XHJcbiAgICAgIGNhc2UgJ2xvZyc6XHJcbiAgICAgIGNhc2UgJ3dhcm4nOlxyXG4gICAgICBjYXNlICdlcnJvcic6XHJcbiAgICAgICAgY29uc29sZVtsZXZlbF0uYXBwbHkoY29uc29sZSwgYXJncyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX2xvZygpIHtcclxuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcclxuICAgIHRoaXMuX2xvZ2dlcignbG9nJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgX3dhcm4oKSB7XHJcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XHJcbiAgICB0aGlzLl9sb2dnZXIoJ3dhcm4nLCBhcmdzKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBfZXJyb3IoKSB7XHJcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XHJcbiAgICB0aGlzLl9sb2dnZXIoJ2Vycm9yJywgYXJncyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIGEgbmFtZWQgZXZlbnQgd2l0aCBgbmFtZWBcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIG5hbWUgb2YgdGhlIGV2ZW50XHJcbiAgICogQHJldHVybiB7RXZlbnR9IFJldHVybnMgYSBjcmVhdGVkIGV2ZW50XHJcbiAgICogKi9cclxuICBzdGF0aWMgbmV3RXZlbnQobmFtZSl7XHJcbiAgICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcclxuICAgIGV2ZW50LmluaXRFdmVudChuYW1lLCB0cnVlLCB0cnVlKTtcclxuICAgIHJldHVybiBldmVudDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluc3BlY3RzIGlmIHRoZSBjdXJyZW50IHN0cmluZyBtaWdodCBiZSBjb252ZXJ0ZWQgdG8gbnVtYmVyIGFuZCByZW5kZXJzIGl0IGFzIG51bWJlci4gSWYgc3RyaW5nIGxlbmd0aCBpcyAwLCByZXR1cm5zIGBudWxsYC4gSWYgbm9uZSBhcHBsaWVzIHJldHVybnMgdGhlIHN0cmluZyBhcyBpcy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyIC0gdmFsdWUgb2YgdGhlIGNlbGwgaWYgbm90IEhUTUwgY29udGVudHNcclxuICAgKiBAcmV0dXJuIHtOdW1iZXJ8bnVsbHxTdHJpbmd9XHJcbiAgICogKi9cclxuICBzdGF0aWMgaXNOdW1iZXIoc3RyKXtcclxuICAgIGlmKCFpc05hTihwYXJzZUZsb2F0KHN0cikpKXtcclxuICAgICAgc3RyID0gc3RyLnJlcGxhY2UoLywvaSwnJyk7Ly8gcmVtb3ZlIHVubmVjZXNzYXJ5IGNvbW1hIGFzIGEgZGVsaW1pdGVyIGZvciB0aG91c2FuZHMgZnJvbSBkYXRhLlxyXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChzdHIpO1xyXG4gICAgfSBlbHNlIGlmKHN0ci5sZW5ndGg9PTApe3JldHVybiBudWxsfSBlbHNlIHtyZXR1cm4gc3RyfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYW4gWEhSIHdyYXBwZWQgaW4gYSBQcm9taXNlXHJcbiAgICogQHBhcmFtIHshU3RyaW5nfSBVUkwgLSB1cmwgdG8gc2VuZCBhIGBHRVRgIHJlcXVlc3QgdG9cclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSBSZXR1cm5zIGEgdGhlbi1hYmxlIHByb21pc2Ugd2l0aCBgWE1MSHR0cFJlcXVlc3QucmVzcG9uc2VUZXh0YFxyXG4gICAqICovXHJcbiAgc3RhdGljIHByb21pc2VSZXF1ZXN0KFVSTCl7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KT0+e1xyXG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgIHhoci5vcGVuKCdHRVQnLCBVUkwsIHRydWUpO1xyXG4gICAgICB4aHIub25sb2FkID0gKCk9Pnt4aHIuc3RhdHVzID09IDIwMD9yZXNvbHZlKHhoci5yZXNwb25zZVRleHQpOnJlamVjdChFcnJvcihgJHt4aHIuc3RhdHVzfTogJHt4aHIuc3RhdHVzVGV4dH1gKSk7fVxyXG4gICAgICB4aHIub25lcnJvciA9ICgpPT57cmVqZWN0KEVycm9yKFwiTmV0d29yayBFcnJvclwiKSk7fVxyXG4gICAgICB4aHIuc2VuZCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIGEgdmFyaWFibGUgbGlzdGVkIGluIHF1ZXJ5IHN0cmluZ1xyXG4gICAqIEBwYXJhbSB7IVN0cmluZ30gdmFyaWFibGUgLSB2YXJpYWJsZSBuYW1lIHRvIGdldCB2YWx1ZSBmb3JcclxuICAgKiBAcGFyYW0ge1N0cmluZz19IFtxdWVyeT13aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKV0gLSB0aGUgcXVlcnkgc3RyaW5nIHRvIHNlYXJjaCB2YXJpYWJsZSBmb3IgaW5cclxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IFJldHVybnMgdmFsdWUgZm9yIHRoZSB2YXJpYWJsZVxyXG4gICAqICovXHJcbiAgc3RhdGljIGdldFF1ZXJ5VmFyaWFibGUodmFyaWFibGUscXVlcnk9d2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkpe1xyXG4gICAgdmFyIHZhcnMgPSBxdWVyeS5zcGxpdChcIiZcIik7XHJcbiAgICBmb3IgKHZhciBpPTA7aTx2YXJzLmxlbmd0aDtpKyspIHtcclxuICAgICAgdmFyIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcclxuICAgICAgaWYoKHBhaXJbMF0pLnRvTG93ZXJDYXNlKCkgPT0gdmFyaWFibGUudG9Mb3dlckNhc2UoKSl7cmV0dXJuIHBhaXJbMV07fVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxufVxyXG5leHBvcnQgZGVmYXVsdCBSZXBvcnRhbEJhc2VcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9yLXJlcG9ydGFsLWJhc2Uvc3JjL3JlcG9ydGFsLWJhc2UuanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 2 */
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DrilldownMap = function () {\n  function DrilldownMap() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        hierarchy = _ref.hierarchy,\n        containerID = _ref.containerID,\n        _ref$dataClasses = _ref.dataClasses,\n        dataClasses = _ref$dataClasses === undefined ? [{\n      from: 80,\n      to: 100,\n      color: '#8bc34a',\n      name: 'Promoter'\n    }, {\n      from: 60,\n      to: 80,\n      color: '#ffc107',\n      name: 'Passive'\n    }, {\n      from: 0,\n      to: 60,\n      color: '#f44336',\n      name: 'Detractor'\n    }] : _ref$dataClasses,\n        options = _ref.options;\n\n    _classCallCheck(this, DrilldownMap);\n\n    if ((typeof Highcharts === 'undefined' ? 'undefined' : _typeof(Highcharts)) == undefined) {\n      throw new Error('Highcharts must be declared. Probably they are missing');\n    };\n    if (_typeof(Highcharts.maps) == undefined) {\n      throw new Error('HighMaps must be loaded. Probably they are missing');\n    };\n    this.constructor.addMapIDsToHierarchyLevel(hierarchy);\n    this.constructor.drawMap(hierarchy, containerID, dataClasses);\n  }\n\n  _createClass(DrilldownMap, null, [{\n    key: 'createCustomGeoJSON',\n    value: function createCustomGeoJSON(sourceMap, countriesList, mapName) {\n      var geojson = {\n        title: \"\",\n        version: \"0.1.0\",\n        type: \"FeatureCollection\",\n        copyright: \"Copyright (c) 2015 Highsoft AS, Based on data from Natural Earth\",\n        copyrightShort: \"Natural Earth\",\n        copyrightUrl: \"http://www.naturalearthdata.com\",\n        crs: {\n          type: \"name\",\n          properties: {\n            name: \"urn:ogc:def:crs:EPSG:54003\"\n          }\n        },\n        \"hc-transform\": {\n          default: {\n            crs: \"+proj=mill +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +R_A +datum=WGS84 +units=m +no_defs\",\n            scale: 1.72182781654e-05,\n            jsonres: 15.5,\n            jsonmarginX: -999,\n            jsonmarginY: 9851.0,\n            xoffset: -19495356.3693,\n            yoffset: 12635908.1982\n          }\n        },\n        features: []\n      };\n      geojson.title = mapName;\n      if (typeof countriesList === 'string') {\n        sourceMap.features.reverse().forEach(function (feature) {\n          if (feature.properties[\"hc-key\"] === countriesList) {\n            geojson.features.push(feature);\n          }\n        });\n      } else if (Array.isArray(countriesList)) {\n        countriesList.forEach(function (id) {\n          sourceMap.features.reverse().forEach(function (feature) {\n            if (feature.properties[\"hc-key\"] === id) {\n              geojson.features.push(feature);\n            }\n          });\n        });\n      }\n      return geojson;\n    }\n  }, {\n    key: 'initMap',\n    value: function initMap(obj) {\n      var series = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      obj.subcells.forEach(function (el) {\n        if (el.mapID) {\n          var s = DrilldownMap.composeSeries(el);\n          series.push(s);\n        }\n      });\n      return series;\n    }\n  }, {\n    key: 'addMapIDsToHierarchyLevel',\n    value: function addMapIDsToHierarchyLevel(hierarchy) {\n      var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      hierarchy.forEach(function (el) {\n        el.parent = parent;\n        el.value = Math.random() * 100;\n        if (el.parent && el.parent.map) {\n          el.map = el.parent.map;\n        }\n        if (el.subcells) {\n          DrilldownMap.addMapIDsToHierarchyLevel(el.subcells, el);\n        }\n        if (el.parent && el.mapID && !el.parent.map) {\n          if (!el.parent.mapID) el.parent.mapID = [];\n          el.parent.mapID = el.parent.mapID.concat(el.mapID);\n        }\n      });\n    }\n  }, {\n    key: 'loadMap',\n    value: function loadMap(source) {\n      var map = new Promise(function (resolve, reject) {\n        jQuery.getScript('https://code.highcharts.com/mapdata/' + source + '.js', function () {\n          resolve(Highcharts.maps[source]);\n        });\n      });\n      return map;\n    }\n  }, {\n    key: 'getSeriesData',\n    value: function getSeriesData(el) {\n      var drilldown = void 0;\n      el.subcells ? drilldown = el.text : drilldown = null;\n      if (typeof el.mapID === 'string') {\n        return [{\n          'drilldown': drilldown,\n          'code': el.mapID,\n          'value': el.value\n        }];\n      } else if (Array.isArray(el.mapID)) {\n        return el.mapID.map(function (id) {\n          return {\n            'drilldown': drilldown,\n            'code': id,\n            'value': el.value\n          };\n        });\n      } else {\n        throw new Error(\"Data element is corrupted\");\n      }\n    }\n  }, {\n    key: 'getColor',\n    value: function getColor(val) {\n      if (val < 60) return '#f44336';else if (val < 80) return '#ffc107';else return '#8bc34a';\n    }\n  }, {\n    key: 'composeSeries',\n    value: function composeSeries(el, mapData, chart) {\n      if (el.coordinates) {\n        mapData ? chart.mapTransforms = mapData[\"hc-transform\"] : chart.mapTransforms = Highcharts.maps[\"custom/world-highres2\"][\"hc-transform\"];\n        var pos = chart.fromLatLonToPoint({ lat: el.coordinates[0], lon: el.coordinates[1] });\n        return {\n          events: {\n            // click: onclick function\n          },\n          type: \"mappoint\", // or mapbubble\n          name: el.text,\n          marker: {\n            lineColor: \"black\",\n            lineWidth: 1,\n            radius: 4,\n            symbol: \"circle\"\n          },\n          data: [{\n            color: DrilldownMap.getColor(el.value),\n            name: el.text,\n            value: el.value,\n            x: pos.x,\n            y: pos.y\n          }]\n        };\n      } else {\n        mapData ? mapData = Highcharts.geojson(DrilldownMap.createCustomGeoJSON(mapData, el.mapID, el.text)) : mapData = Highcharts.geojson(DrilldownMap.createCustomGeoJSON(Highcharts.maps['custom/world-highres2'], el.mapID, el.text));\n        if (el.mapID) {\n          var s = {\n            name: el.text,\n            tooltip: {\n              pointFormat: 'NPS : {point.value}'\n            },\n            allAreas: false,\n            parent: el.parent.text,\n            mapData: mapData,\n            joinBy: ['hc-key', 'code'],\n            data: DrilldownMap.getSeriesData(el)\n          };\n          return s;\n        }\n      }\n    }\n  }, {\n    key: 'updateMap',\n    value: function updateMap(curLVL, chart, e) {\n      curLVL = curLVL.subcells.filter(function (el) {\n        return el.text == e.point.series.name;\n      })[0];\n      if (curLVL && curLVL.map) {\n        // if we have another map to load\n        var map = DrilldownMap.loadMap(curLVL.map);\n        map.then(function (mapData) {\n          DrilldownMap.addSeries(curLVL, chart, e, mapData);\n        });\n      } else if (curLVL && !curLVL.map) {\n        DrilldownMap.addSeries(curLVL, chart, e);\n      }\n      return curLVL;\n    }\n  }, {\n    key: 'addSeries',\n    value: function addSeries(curLVL, chart, e, mapData) {\n      if (curLVL.subcells && curLVL.isGlobal) {\n        if (!curLVL.subcells[0].isGlobal) {\n          var a = DrilldownMap.composeSeries(curLVL, mapData, chart);\n          a.data.map(function (el) {\n            el.drilldown = null, el.value = null;\n          });\n          chart.addSingleSeriesAsDrilldown(e.point, a);\n        }\n        curLVL.subcells.forEach(function (el) {\n          if (!el.mapID && !el.coordinates) return;\n          var a = DrilldownMap.composeSeries(el, mapData, chart);\n          chart.addSingleSeriesAsDrilldown(e.point, a);\n        });\n        chart.applyDrilldown();\n      } else {\n        var _a = DrilldownMap.composeSeries(curLVL, mapData, chart);\n        _a.data.map(function (el) {\n          el.drilldown = null, el.value = null;\n        });\n        chart.addSeriesAsDrilldown(e.point, _a);\n      }\n    }\n  }, {\n    key: 'drawMap',\n    value: function drawMap(hierarchy, containerID, dataClasses) {\n      var curLVL = hierarchy[0];\n      Highcharts.mapChart(containerID, {\n        lang: {\n          drillUpText: 'Back to {series.parent}'\n        },\n        tooltip: {\n          pointFormat: 'NPS : {point.value}'\n        },\n        title: {\n          text: 'Drilldown map'\n        },\n        legend: {\n          enabled: false\n        },\n        colorAxis: {\n          dataClasses: dataClasses\n        },\n        mapNavigation: {\n          enabled: true\n        },\n        subtitle: {\n          align: 'right',\n          text: 'Current level: ' + curLVL.text\n        },\n        chart: {\n          events: {\n            drilldown: function drilldown(e) {\n              var chart = this;\n              curLVL = DrilldownMap.updateMap(curLVL, chart, e);\n              chart.subtitle.update({ text: 'Current region: ' + curLVL.text + '<br> Region NPS: ' + curLVL.value });\n            },\n            drillupall: function drillupall(e) {\n              curLVL = curLVL.parent;\n              this.subtitle.update({ text: 'Current level: ' + curLVL.text });\n            }\n          }\n        },\n        series: DrilldownMap.initMap(curLVL, [{\n          mapData: Highcharts.maps[\"custom/world-highres2\"]\n        }])\n      });\n    }\n  }]);\n\n  return DrilldownMap;\n}();\n\nexports.default = DrilldownMap;\nmodule.exports = exports['default'];//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvRHJpbGxkb3duTWFwLmpzP2UwMjkiXSwibmFtZXMiOlsiRHJpbGxkb3duTWFwIiwiaGllcmFyY2h5IiwiY29udGFpbmVySUQiLCJkYXRhQ2xhc3NlcyIsImZyb20iLCJ0byIsImNvbG9yIiwibmFtZSIsIm9wdGlvbnMiLCJIaWdoY2hhcnRzIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJtYXBzIiwiY29uc3RydWN0b3IiLCJhZGRNYXBJRHNUb0hpZXJhcmNoeUxldmVsIiwiZHJhd01hcCIsInNvdXJjZU1hcCIsImNvdW50cmllc0xpc3QiLCJtYXBOYW1lIiwiZ2VvanNvbiIsInRpdGxlIiwidmVyc2lvbiIsInR5cGUiLCJjb3B5cmlnaHQiLCJjb3B5cmlnaHRTaG9ydCIsImNvcHlyaWdodFVybCIsImNycyIsInByb3BlcnRpZXMiLCJkZWZhdWx0Iiwic2NhbGUiLCJqc29ucmVzIiwianNvbm1hcmdpblgiLCJqc29ubWFyZ2luWSIsInhvZmZzZXQiLCJ5b2Zmc2V0IiwiZmVhdHVyZXMiLCJyZXZlcnNlIiwiZm9yRWFjaCIsImZlYXR1cmUiLCJwdXNoIiwiQXJyYXkiLCJpc0FycmF5IiwiaWQiLCJvYmoiLCJzZXJpZXMiLCJzdWJjZWxscyIsImVsIiwibWFwSUQiLCJzIiwiY29tcG9zZVNlcmllcyIsInBhcmVudCIsInZhbHVlIiwiTWF0aCIsInJhbmRvbSIsIm1hcCIsImNvbmNhdCIsInNvdXJjZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwialF1ZXJ5IiwiZ2V0U2NyaXB0IiwiZHJpbGxkb3duIiwidGV4dCIsInZhbCIsIm1hcERhdGEiLCJjaGFydCIsImNvb3JkaW5hdGVzIiwibWFwVHJhbnNmb3JtcyIsInBvcyIsImZyb21MYXRMb25Ub1BvaW50IiwibGF0IiwibG9uIiwiZXZlbnRzIiwibWFya2VyIiwibGluZUNvbG9yIiwibGluZVdpZHRoIiwicmFkaXVzIiwic3ltYm9sIiwiZGF0YSIsImdldENvbG9yIiwieCIsInkiLCJjcmVhdGVDdXN0b21HZW9KU09OIiwidG9vbHRpcCIsInBvaW50Rm9ybWF0IiwiYWxsQXJlYXMiLCJqb2luQnkiLCJnZXRTZXJpZXNEYXRhIiwiY3VyTFZMIiwiZSIsImZpbHRlciIsInBvaW50IiwibG9hZE1hcCIsInRoZW4iLCJhZGRTZXJpZXMiLCJpc0dsb2JhbCIsImEiLCJhZGRTaW5nbGVTZXJpZXNBc0RyaWxsZG93biIsImFwcGx5RHJpbGxkb3duIiwiYWRkU2VyaWVzQXNEcmlsbGRvd24iLCJtYXBDaGFydCIsImxhbmciLCJkcmlsbFVwVGV4dCIsImxlZ2VuZCIsImVuYWJsZWQiLCJjb2xvckF4aXMiLCJtYXBOYXZpZ2F0aW9uIiwic3VidGl0bGUiLCJhbGlnbiIsInVwZGF0ZU1hcCIsInVwZGF0ZSIsImRyaWxsdXBhbGwiLCJpbml0TWFwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7SUFBTUEsWTtBQUNKLDBCQWVnQjtBQUFBLG1GQUFILEVBQUc7QUFBQSxRQWZIQyxTQWVHLFFBZkhBLFNBZUc7QUFBQSxRQWZRQyxXQWVSLFFBZlFBLFdBZVI7QUFBQSxnQ0FmcUJDLFdBZXJCO0FBQUEsUUFmcUJBLFdBZXJCLG9DQWZtQyxDQUFDO0FBQ2xEQyxZQUFNLEVBRDRDO0FBRWxEQyxVQUFJLEdBRjhDO0FBR2xEQyxhQUFPLFNBSDJDO0FBSWxEQyxZQUFNO0FBSjRDLEtBQUQsRUFLakQ7QUFDQUgsWUFBTSxFQUROO0FBRUFDLFVBQUksRUFGSjtBQUdBQyxhQUFPLFNBSFA7QUFJQUMsWUFBTTtBQUpOLEtBTGlELEVBVWpEO0FBQ0FILFlBQU0sQ0FETjtBQUVBQyxVQUFJLEVBRko7QUFHQUMsYUFBTyxTQUhQO0FBSUFDLFlBQU07QUFKTixLQVZpRCxDQWVuQztBQUFBLFFBQVpDLE9BQVksUUFBWkEsT0FBWTs7QUFBQTs7QUFDZCxRQUFHLFFBQU9DLFVBQVAseUNBQU9BLFVBQVAsTUFBcUJDLFNBQXhCLEVBQWtDO0FBQUMsWUFBTSxJQUFJQyxLQUFKLENBQVUsd0RBQVYsQ0FBTjtBQUEwRTtB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QU8xQixJQUFoQyxFQUFyQjtBQUNEO0FBVEs7QUFESixTQXZCMEI7QUFvQ2hDbkIsZ0JBQVE1QyxhQUFhaUgsT0FBYixDQUFxQnhCLE1BQXJCLEVBQTRCLENBQUM7QUFDbkN4QixtQkFBU3hELFdBQVdHLElBQVgsQ0FBZ0IsdUJBQWhCO0FBRDBCLFNBQUQsQ0FBNUI7QUFwQ3dCLE9BQWxDO0FBd0NEOzs7Ozs7a0JBR1laLFkiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIERyaWxsZG93bk1hcCB7XG4gIGNvbnN0cnVjdG9yKHtoaWVyYXJjaHksIGNvbnRhaW5lcklELCBkYXRhQ2xhc3NlcyA9IFt7XG4gICAgZnJvbTogODAsXG4gICAgdG86IDEwMCxcbiAgICBjb2xvcjogJyM4YmMzNGEnLFxuICAgIG5hbWU6ICdQcm9tb3RlcidcbiAgfSx7XG4gICAgZnJvbTogNjAsXG4gICAgdG86IDgwLFxuICAgIGNvbG9yOiAnI2ZmYzEwNycsXG4gICAgbmFtZTogJ1Bhc3NpdmUnXG4gIH0se1xuICAgIGZyb206IDAsXG4gICAgdG86IDYwLFxuICAgIGNvbG9yOiAnI2Y0NDMzNicsXG4gICAgbmFtZTogJ0RldHJhY3RvcidcbiAgfV0sIG9wdGlvbnN9PXt9KXtcbiAgICBpZih0eXBlb2YgSGlnaGNoYXJ0cyA9PSB1bmRlZmluZWQpe3Rocm93IG5ldyBFcnJvcignSGlnaGNoYXJ0cyBtdXN0IGJlIGRlY2xhcmVkLiBQcm9iYWJseSB0aGV5IGFyZSBtaXNzaW5nJyl9O1xuICAgIGlmKHR5cGVvZiBIaWdoY2hhcnRzLm1hcHMgPT0gdW5kZWZpbmVkKXt0aHJvdyBuZXcgRXJyb3IoJ0hpZ2hNYXBzIG11c3QgYmUgbG9hZGVkLiBQcm9iYWJseSB0aGV5IGFyZSBtaXNzaW5nJyl9O1xuICAgIHRoaXMuY29uc3RydWN0b3IuYWRkTWFwSURzVG9IaWVyYXJjaHlMZXZlbChoaWVyYXJjaHkpO1xuICAgIHRoaXMuY29uc3RydWN0b3IuZHJhd01hcChoaWVyYXJjaHksIGNvbnRhaW5lcklELCBkYXRhQ2xhc3Nlcyk7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlQ3VzdG9tR2VvSlNPTihzb3VyY2VNYXAsIGNvdW50cmllc0xpc3QsIG1hcE5hbWUpIHtcbiAgICBsZXQgZ2VvanNvbiA9IHtcbiAgICAgIHRpdGxlOlwiXCIsXG4gICAgICB2ZXJzaW9uOlwiMC4xLjBcIixcbiAgICAgIHR5cGU6XCJGZWF0dXJlQ29sbGVjdGlvblwiLFxuICAgICAgY29weXJpZ2h0OlwiQ29weXJpZ2h0IChjKSAyMDE1IEhpZ2hzb2Z0IEFTLCBCYXNlZCBvbiBkYXRhIGZyb20gTmF0dXJhbCBFYXJ0aFwiLFxuICAgICAgY29weXJpZ2h0U2hvcnQ6XCJOYXR1cmFsIEVhcnRoXCIsXG4gICAgICBjb3B5cmlnaHRVcmw6XCJodHRwOi8vd3d3Lm5hdHVyYWxlYXJ0aGRhdGEuY29tXCIsXG4gICAgICBjcnM6e1xuICAgICAgICB0eXBlOlwibmFtZVwiLFxuICAgICAgICBwcm9wZXJ0aWVzOntcbiAgICAgICAgICBuYW1lOlwidXJuOm9nYzpkZWY6Y3JzOkVQU0c6NTQwMDNcIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgXCJoYy10cmFuc2Zvcm1cIjp7XG4gICAgICAgIGRlZmF1bHQ6e1xuICAgICAgICAgIGNyczpcIitwcm9qPW1pbGwgK2xhdF8wPTAgK2xvbl8wPTAgK3hfMD0wICt5XzA9MCArUl9BICtkYXR1bT1XR1M4NCArdW5pdHM9bSArbm9fZGVmc1wiLFxuICAgICAgICAgIHNjYWxlOjEuNzIxODI3ODE2NTRlLTA1LFxuICAgICAgICAgIGpzb25yZXM6MTUuNSxcbiAgICAgICAgICBqc29ubWFyZ2luWDotOTk5LFxuICAgICAgICAgIGpzb25tYXJnaW5ZOjk4NTEuMCxcbiAgICAgICAgICB4b2Zmc2V0Oi0xOTQ5NTM1Ni4zNjkzLFxuICAgICAgICAgIHlvZmZzZXQ6MTI2MzU5MDguMTk4MlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZmVhdHVyZXM6W11cbiAgICB9O1xuICAgIGdlb2pzb24udGl0bGUgPSBtYXBOYW1lO1xuICAgIGlmICh0eXBlb2YgY291bnRyaWVzTGlzdCA9PT0gJ3N0cmluZycpe1xuICAgICAgc291cmNlTWFwLmZlYXR1cmVzLnJldmVyc2UoKS5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzW1wiaGMta2V5XCJdID09PSBjb3VudHJpZXNMaXN0KSB7XG4gICAgICAgICAgZ2VvanNvbi5mZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjb3VudHJpZXNMaXN0KSl7XG4gICAgICBjb3VudHJpZXNMaXN0LmZvckVhY2goaWQgPT4ge1xuICAgICAgICBzb3VyY2VNYXAuZmVhdHVyZXMucmV2ZXJzZSgpLmZvckVhY2goZmVhdHVyZSA9PiB7XG4gICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllc1tcImhjLWtleVwiXSA9PT0gaWQpIHtcbiAgICAgICAgICAgIGdlb2pzb24uZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGdlb2pzb247XG4gIH1cblxuICBzdGF0aWMgaW5pdE1hcChvYmosIHNlcmllcyA9IFtdKXtcbiAgICBvYmouc3ViY2VsbHMuZm9yRWFjaCggZWwgPT4ge1xuICAgICAgaWYgKGVsLm1hcElEKSB7XG4gICAgICAgIGxldCBzID0gRHJpbGxkb3duTWFwLmNvbXBvc2VTZXJpZXMoZWwpO1xuICAgICAgICBzZXJpZXMucHVzaChzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc2VyaWVzO1xuICB9XG5cbiAgc3RhdGljIGFkZE1hcElEc1RvSGllcmFyY2h5TGV2ZWwoaGllcmFyY2h5LCBwYXJlbnQgPSBudWxsKSB7XG4gICAgaGllcmFyY2h5LmZvckVhY2goZWwgPT4ge1xuICAgICAgZWwucGFyZW50ID0gcGFyZW50O1xuICAgICAgZWwudmFsdWUgPSBNYXRoLnJhbmRvbSgpKjEwMDtcbiAgICAgIGlmKGVsLnBhcmVudCAmJiBlbC5wYXJlbnQubWFwKXtcbiAgICAgICAgZWwubWFwID0gZWwucGFyZW50Lm1hcDtcbiAgICAgIH1cbiAgICAgIGlmIChlbC5zdWJjZWxscykge1xuICAgICAgICBEcmlsbGRvd25NYXAuYWRkTWFwSURzVG9IaWVyYXJjaHlMZXZlbChlbC5zdWJjZWxscywgZWwpO1xuICAgICAgfVxuICAgICAgaWYoZWwucGFyZW50ICYmIGVsLm1hcElEICYmICFlbC5wYXJlbnQubWFwKXtcbiAgICAgICAgaWYoIWVsLnBhcmVudC5tYXBJRClcbiAgICAgICAgICBlbC5wYXJlbnQubWFwSUQgPSBbXTtcbiAgICAgICAgZWwucGFyZW50Lm1hcElEID0gZWwucGFyZW50Lm1hcElELmNvbmNhdChlbC5tYXBJRCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgbG9hZE1hcChzb3VyY2Upe1xuICAgIGxldCBtYXAgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpPT57XG4gICAgICBqUXVlcnkuZ2V0U2NyaXB0KCdodHRwczovL2NvZGUuaGlnaGNoYXJ0cy5jb20vbWFwZGF0YS8nICsgc291cmNlICsgJy5qcycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVzb2x2ZShIaWdoY2hhcnRzLm1hcHNbc291cmNlXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gbWFwO1xuICB9XG5cbiAgc3RhdGljIGdldFNlcmllc0RhdGEoZWwpe1xuICAgIGxldCBkcmlsbGRvd247XG4gICAgZWwuc3ViY2VsbHMgPyBkcmlsbGRvd24gPSBlbC50ZXh0IDogZHJpbGxkb3duID0gbnVsbDtcbiAgICBpZiAodHlwZW9mIGVsLm1hcElEID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIFt7XG4gICAgICAgICdkcmlsbGRvd24nOiBkcmlsbGRvd24sXG4gICAgICAgICdjb2RlJzogZWwubWFwSUQsXG4gICAgICAgICd2YWx1ZSc6IGVsLnZhbHVlXG4gICAgICB9XVxuICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlbC5tYXBJRCkpe1xuICAgICAgcmV0dXJuIGVsLm1hcElELm1hcChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAnZHJpbGxkb3duJzogZHJpbGxkb3duLFxuICAgICAgICAgICdjb2RlJzogaWQsXG4gICAgICAgICAgJ3ZhbHVlJzogZWwudmFsdWVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGEgZWxlbWVudCBpcyBjb3JydXB0ZWRcIik7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBnZXRDb2xvcih2YWwpe1xuICAgIGlmICh2YWwgPCA2MClcbiAgICAgIHJldHVybiAnI2Y0NDMzNic7XG4gICAgZWxzZSBpZiAodmFsIDwgODApXG4gICAgICByZXR1cm4gJyNmZmMxMDcnO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiAnIzhiYzM0YSc7XG4gIH1cbiAgc3RhdGljIGNvbXBvc2VTZXJpZXMoZWwsbWFwRGF0YSxjaGFydCl7XG4gICAgaWYoZWwuY29vcmRpbmF0ZXMpe1xuICAgICAgbWFwRGF0YSA/IGNoYXJ0Lm1hcFRyYW5zZm9ybXMgPSBtYXBEYXRhW1wiaGMtdHJhbnNmb3JtXCJdIDogY2hhcnQubWFwVHJhbnNmb3JtcyA9IEhpZ2hjaGFydHMubWFwc1tcImN1c3RvbS93b3JsZC1oaWdocmVzMlwiXVtcImhjLXRyYW5zZm9ybVwiXTtcbiAgICAgIGxldCBwb3MgPSBjaGFydC5mcm9tTGF0TG9uVG9Qb2ludCh7IGxhdDogZWwuY29vcmRpbmF0ZXNbMF0sIGxvbjogZWwuY29vcmRpbmF0ZXNbMV0gfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICAvLyBjbGljazogb25jbGljayBmdW5jdGlvblxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiBcIm1hcHBvaW50XCIsIC8vIG9yIG1hcGJ1YmJsZVxuICAgICAgICBuYW1lOiBlbC50ZXh0LFxuICAgICAgICBtYXJrZXI6IHtcbiAgICAgICAgICBsaW5lQ29sb3I6IFwiYmxhY2tcIixcbiAgICAgICAgICBsaW5lV2lkdGg6IDEsXG4gICAgICAgICAgcmFkaXVzOiA0LFxuICAgICAgICAgIHN5bWJvbDogXCJjaXJjbGVcIixcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogW3tcbiAgICAgICAgICBjb2xvcjogRHJpbGxkb3duTWFwLmdldENvbG9yKGVsLnZhbHVlKSxcbiAgICAgICAgICBuYW1lOiBlbC50ZXh0LFxuICAgICAgICAgIHZhbHVlOiBlbC52YWx1ZSxcbiAgICAgICAgICB4OiBwb3MueCxcbiAgICAgICAgICB5OiBwb3MueVxuICAgICAgICB9XVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBtYXBEYXRhID8gbWFwRGF0YSA9IEhpZ2hjaGFydHMuZ2VvanNvbihEcmlsbGRvd25NYXAuY3JlYXRlQ3VzdG9tR2VvSlNPTihtYXBEYXRhLCBlbC5tYXBJRCwgZWwudGV4dCkpIDpcbiAgICAgICAgbWFwRGF0YSA9IEhpZ2hjaGFydHMuZ2VvanNvbihEcmlsbGRvd25NYXAuY3JlYXRlQ3VzdG9tR2VvSlNPTihIaWdoY2hhcnRzLm1hcHNbJ2N1c3RvbS93b3JsZC1oaWdocmVzMiddLCBlbC5tYXBJRCwgZWwudGV4dCkpO1xuICAgICAgaWYgKGVsLm1hcElEKSB7XG4gICAgICAgIGxldCBzID0ge1xuICAgICAgICAgIG5hbWU6IGVsLnRleHQsXG4gICAgICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgICAgcG9pbnRGb3JtYXQ6ICdOUFMgOiB7cG9pbnQudmFsdWV9J1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWxsQXJlYXM6IGZhbHNlLFxuICAgICAgICAgIHBhcmVudDogZWwucGFyZW50LnRleHQsXG4gICAgICAgICAgbWFwRGF0YSxcbiAgICAgICAgICBqb2luQnk6IFsnaGMta2V5JywgJ2NvZGUnXSxcbiAgICAgICAgICBkYXRhOiBEcmlsbGRvd25NYXAuZ2V0U2VyaWVzRGF0YShlbCksXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBzO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBzdGF0aWMgdXBkYXRlTWFwKGN1ckxWTCwgY2hhcnQsIGUpe1xuICAgIGN1ckxWTCA9IGN1ckxWTC5zdWJjZWxscy5maWx0ZXIoIGVsID0+IGVsLnRleHQgPT0gZS5wb2ludC5zZXJpZXMubmFtZSlbMF07XG4gICAgaWYoY3VyTFZMICYmIGN1ckxWTC5tYXApey8vIGlmIHdlIGhhdmUgYW5vdGhlciBtYXAgdG8gbG9hZFxuICAgICAgbGV0IG1hcCA9IERyaWxsZG93bk1hcC5sb2FkTWFwKGN1ckxWTC5tYXApO1xuICAgICAgbWFwLnRoZW4obWFwRGF0YT0+e1xuICAgICAgICBEcmlsbGRvd25NYXAuYWRkU2VyaWVzKGN1ckxWTCxjaGFydCxlLG1hcERhdGEpXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYoY3VyTFZMICYmICFjdXJMVkwubWFwKXtcbiAgICAgIERyaWxsZG93bk1hcC5hZGRTZXJpZXMoY3VyTFZMLGNoYXJ0LGUpO1xuICAgIH1cbiAgICByZXR1cm4gY3VyTFZMO1xuICB9XG5cbiAgc3RhdGljIGFkZFNlcmllcyhjdXJMVkwsY2hhcnQsZSxtYXBEYXRhKXtcbiAgICBpZiAoY3VyTFZMLnN1YmNlbGxzICYmIGN1ckxWTC5pc0dsb2JhbCkge1xuICAgICAgaWYoIWN1ckxWTC5zdWJjZWxsc1swXS5pc0dsb2JhbCl7XG4gICAgICAgIGxldCBhID0gRHJpbGxkb3duTWFwLmNvbXBvc2VTZXJpZXMoY3VyTFZMLG1hcERhdGEsIGNoYXJ0KTtcbiAgICAgICAgYS5kYXRhLm1hcChlbCA9PiB7ZWwuZHJpbGxkb3duID0gbnVsbCwgZWwudmFsdWUgPSBudWxsfSk7XG4gICAgICAgIGNoYXJ0LmFkZFNpbmdsZVNlcmllc0FzRHJpbGxkb3duKGUucG9pbnQsIGEpO1xuICAgICAgfVxuICAgICAgY3VyTFZMLnN1YmNlbGxzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICBpZighZWwubWFwSUQgJiYgIWVsLmNvb3JkaW5hdGVzKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGEgPSBEcmlsbGRvd25NYXAuY29tcG9zZVNlcmllcyhlbCxtYXBEYXRhLCBjaGFydCk7XG4gICAgICAgIGNoYXJ0LmFkZFNpbmdsZVNlcmllc0FzRHJpbGxkb3duKGUucG9pbnQsIGEpO1xuICAgICAgfSk7XG4gICAgICBjaGFydC5hcHBseURyaWxsZG93bigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBhID0gRHJpbGxkb3duTWFwLmNvbXBvc2VTZXJpZXMoY3VyTFZMLCBtYXBEYXRhLCBjaGFydCk7XG4gICAgICAgIGEuZGF0YS5tYXAoZWwgPT4ge2VsLmRyaWxsZG93biA9IG51bGwsIGVsLnZhbHVlID0gbnVsbH0pO1xuICAgICAgICBjaGFydC5hZGRTZXJpZXNBc0RyaWxsZG93bihlLnBvaW50LCBhKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZHJhd01hcChoaWVyYXJjaHksIGNvbnRhaW5lcklELCBkYXRhQ2xhc3Nlcyl7XG4gICAgbGV0IGN1ckxWTCA9IGhpZXJhcmNoeVswXTtcbiAgICBIaWdoY2hhcnRzLm1hcENoYXJ0KCBjb250YWluZXJJRCwge1xuICAgICAgbGFuZzoge1xuICAgICAgICBkcmlsbFVwVGV4dDogJ0JhY2sgdG8ge3Nlcmllcy5wYXJlbnR9J1xuICAgICAgfSxcbiAgICAgIHRvb2x0aXA6IHtcbiAgICAgICAgcG9pbnRGb3JtYXQ6ICdOUFMgOiB7cG9pbnQudmFsdWV9J1xuICAgICAgfSxcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIHRleHQ6ICdEcmlsbGRvd24gbWFwJ1xuICAgICAgfSxcbiAgICAgIGxlZ2VuZDoge1xuICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgfSxcbiAgICAgIGNvbG9yQXhpczoge1xuICAgICAgICBkYXRhQ2xhc3Nlc1xuICAgICAgfSxcbiAgICAgIG1hcE5hdmlnYXRpb246IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBzdWJ0aXRsZTp7XG4gICAgICAgIGFsaWduOiAncmlnaHQnLFxuICAgICAgICB0ZXh0OiBgQ3VycmVudCBsZXZlbDogJHtjdXJMVkwudGV4dH1gXG4gICAgICB9LFxuICAgICAgY2hhcnQ6e1xuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICBkcmlsbGRvd246IGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgbGV0IGNoYXJ0ID0gdGhpcztcbiAgICAgICAgICAgIGN1ckxWTCA9IERyaWxsZG93bk1hcC51cGRhdGVNYXAoY3VyTFZMLCBjaGFydCwgZSk7XG4gICAgICAgICAgICBjaGFydC5zdWJ0aXRsZS51cGRhdGUoe3RleHQ6IGBDdXJyZW50IHJlZ2lvbjogJHtjdXJMVkwudGV4dH08YnI+IFJlZ2lvbiBOUFM6ICR7Y3VyTFZMLnZhbHVlfWB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRyaWxsdXBhbGw6IGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgY3VyTFZMID0gY3VyTFZMLnBhcmVudDtcbiAgICAgICAgICAgIHRoaXMuc3VidGl0bGUudXBkYXRlKHt0ZXh0OiBgQ3VycmVudCBsZXZlbDogJHtjdXJMVkwudGV4dH1gfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2VyaWVzOiBEcmlsbGRvd25NYXAuaW5pdE1hcChjdXJMVkwsW3tcbiAgICAgICAgbWFwRGF0YTogSGlnaGNoYXJ0cy5tYXBzW1wiY3VzdG9tL3dvcmxkLWhpZ2hyZXMyXCJdXG4gICAgICB9XSlcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEcmlsbGRvd25NYXA7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvRHJpbGxkb3duTWFwLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);